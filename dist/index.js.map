{"version":3,"file":"index.js","sources":["../src/js/Utilities/Helpers.js","../src/js/Components/Actions.js","../src/js/MetaTitle.js","../src/js/Components/MyFormPrompt.js","../src/js/Components/MyForm.js","../src/js/Components/AddForm.js","../src/js/Utilities/Auth.js","../src/js/Pages/Auth/ForgotPassword.js","../src/js/Pages/Auth/Login.js","../src/js/Nav.js","../src/js/Pages/Auth/ResetPassword.js","../src/js/App.js","../src/js/Components/EditForm.js","../src/js/Components/IndexTable.js","../src/index.js"],"sourcesContent":["import get from 'get-value';\n\nexport const capitalize = (s) => (\n\ts.replace(/(?:^|\\s)\\S/g, (a) => (a.toUpperCase()))\n);\n\nexport const cleanKey = (key) => (key.replace(/^relationships\\./, ''));\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nconst escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst filterByKey = (records, key, value) => {\n\tvalue = value.toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = (get(record, key) || '').toString().toLowerCase();\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = (get(a, key) || '').toString().toLowerCase();\n\t\tconst bValue = (get(b, key) || '').toString().toLowerCase();\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n\nexport const filterByKeys = (records, filters) => {\n\tObject.keys(filters).forEach((key) => {\n\t\trecords = filterByKey(records, key, filters[key]);\n\t});\n\treturn records;\n};\n\nexport const getErrorMessage = (response) => {\n\tif (response.message) {\n\t\treturn `Error: ${response.message}`;\n\t}\n\tif (response.errors) {\n\t\treturn `Error: ${response.errors.map((error) => (error.title)).join(', ')}`;\n\t}\n\treturn 'Error loading data. Please try again later.';\n};\n\nexport const sortByKey = (records, key, dir) => (\n\trecords.sort((a, b) => {\n\t\tlet aVal = get(a, key);\n\t\tif (aVal === undefined || aVal === null) {\n\t\t\taVal = '';\n\t\t}\n\t\tlet bVal = get(b, key);\n\t\tif (bVal === undefined || bVal === null) {\n\t\t\tbVal = '';\n\t\t}\n\t\tif (aVal === bVal) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (aVal === '') {\n\t\t\treturn 1;\n\t\t}\n\t\tif (bVal === '') {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (typeof aVal === 'number' && typeof bVal === 'number') {\n\t\t\tif (dir === 'asc') {\n\t\t\t\treturn aVal < bVal ? -1 : 1;\n\t\t\t}\n\t\t\treturn aVal > bVal ? -1 : 1;\n\t\t}\n\n\t\taVal = aVal.toString();\n\t\tbVal = bVal.toString();\n\t\treturn dir === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n\t})\n);\n","import { Api, Form, FormosaContext } from '@jlbelanger/formosa';\nimport { NavLink, useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { capitalize } from '../Utilities/Helpers';\nimport PropTypes from 'prop-types';\n\nexport default function Actions({\n\tapiPath,\n\tchildren,\n\tcurrentPage,\n\tpath,\n\trow,\n\tsaveButtonText,\n\tsetRow,\n\tshowSave,\n\tsingular,\n\tsubpages,\n}) {\n\tconst history = useHistory();\n\tconst { formosaState } = useContext(FormosaContext);\n\n\tconst onDelete = (e) => {\n\t\te.preventDefault();\n\n\t\tif (!confirm(`Are you sure you want to delete this ${singular}?`)) { // eslint-disable-line no-restricted-globals\n\t\t\treturn;\n\t\t}\n\n\t\tformosaState.disableWarningPrompt();\n\n\t\tApi.delete(`${apiPath}/${row.id}`)\n\t\t\t.then(() => {\n\t\t\t\tformosaState.addToast(`${capitalize(singular)} deleted successfully.`, 'success');\n\t\t\t\thistory.push(`/${path}`);\n\t\t\t\tformosaState.enableWarningPrompt();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tconst text = response.message ? response.message : response.errors.map((err) => (err.title)).join(' ');\n\t\t\t\tformosaState.addToast(text, 'error', 10000);\n\t\t\t\tformosaState.enableWarningPrompt();\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<ul className=\"crudnick-list\">\n\t\t\t{showSave && (\n\t\t\t\t<li>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tform=\"crudnick-edit-form\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{currentPage !== '/' && (\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink className=\"crudnick-list__button formosa-button\" to={`/${path}/${row.id}`}>Edit</NavLink>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t<li>\n\t\t\t\t<Form\n\t\t\t\t\tonSubmit={onDelete}\n\t\t\t\t\trow={row}\n\t\t\t\t\tsetRow={setRow}\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button formosa-button--danger\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</button>\n\t\t\t\t</Form>\n\t\t\t</li>\n\t\t\t{process.env.REACT_APP_FRONTEND_URL && row.url && (\n\t\t\t\t<li>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button crudnick-button--secondary\"\n\t\t\t\t\t\thref={`${process.env.REACT_APP_FRONTEND_URL}${row.url}`}\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{subpages.map((page) => (\n\t\t\t\t<li key={page}>\n\t\t\t\t\t<NavLink\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button crudnick-button--secondary\"\n\t\t\t\t\t\tto={`/${path}/${row.id}/${page.toLowerCase()}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{page}\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t\t{children}\n\t\t</ul>\n\t);\n}\n\nActions.propTypes = {\n\tapiPath: PropTypes.string.isRequired,\n\tchildren: PropTypes.node,\n\tcurrentPage: PropTypes.string.isRequired,\n\tpath: PropTypes.string.isRequired,\n\tsaveButtonText: PropTypes.string,\n\trow: PropTypes.object,\n\tsetRow: PropTypes.func.isRequired,\n\tshowSave: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\tsubpages: PropTypes.array,\n};\n\nActions.defaultProps = {\n\tchildren: null,\n\trow: null,\n\tsaveButtonText: 'Save',\n\tshowSave: true,\n\tsubpages: [],\n};\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function MetaTitle({ title }) {\n\tuseEffect(() => {\n\t\tlet metaTitle = title;\n\t\tif (process.env.REACT_APP_TITLE) {\n\t\t\tif (metaTitle) {\n\t\t\t\tmetaTitle += ' | ';\n\t\t\t}\n\t\t\tmetaTitle += process.env.REACT_APP_TITLE;\n\t\t}\n\t\tdocument.querySelector('title').innerText = metaTitle;\n\t\treturn () => {};\n\t}, [title]);\n\n\treturn null;\n}\n\nMetaTitle.propTypes = {\n\ttitle: PropTypes.string,\n};\n\nMetaTitle.defaultProps = {\n\ttitle: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { FormContext } from '@jlbelanger/formosa';\nimport { Prompt } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function MyFormPrompt() {\n\tconst { formState } = useContext(FormContext);\n\treturn (\n\t\t<Prompt\n\t\t\twhen={formState.dirty.length > 0}\n\t\t\tmessage=\"You have unsaved changes. Are you sure you want to leave this page?\"\n\t\t/>\n\t);\n}\n","import { Form, FormosaContext } from '@jlbelanger/formosa';\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport MyFormPrompt from './MyFormPrompt';\nimport PropTypes from 'prop-types';\n\nexport default function MyForm({ children, showWarningPrompt, ...otherProps }) {\n\tconst { formosaState } = useContext(FormosaContext);\n\n\treturn (\n\t\t<Form {...otherProps}>\n\t\t\t{children}\n\t\t\t{showWarningPrompt && formosaState.showWarningPrompt && <MyFormPrompt />}\n\t\t</Form>\n\t);\n}\n\nMyForm.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tshowWarningPrompt: PropTypes.bool,\n};\n\nMyForm.defaultProps = {\n\tshowWarningPrompt: true,\n};\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { capitalize } from '../Utilities/Helpers';\nimport { Field } from '@jlbelanger/formosa';\nimport MetaTitle from '../MetaTitle';\nimport MyForm from './MyForm';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function AddForm({\n\taddAnotherText,\n\tapiPath,\n\tcomponent,\n\tcomponentProps,\n\tdefaultRow,\n\textra,\n\tfilterBody,\n\tfilterValues,\n\tpath,\n\trelationshipNames,\n\tsaveButtonText,\n\tshowAddAnother,\n\tsingular,\n\ttitlePrefixText,\n\t...otherProps\n}) {\n\tconst [row, setRow] = useState(defaultRow);\n\tconst [addAnother, setAddAnother] = useState(false);\n\tconst history = useHistory();\n\n\tconst afterSubmit = (response) => {\n\t\tif (!addAnother) {\n\t\t\thistory.push(`/${path}/${response.id}`);\n\t\t}\n\t};\n\n\tconst FormComponent = component;\n\tcomponentProps.formType = 'add';\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={`${titlePrefixText} ${singular}`} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1>{`${titlePrefixText} ${singular}`}</h1>\n\t\t\t\t<ul className=\"crudnick-list\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"formosa-button\"\n\t\t\t\t\t\t\tform=\"crudnick-add-form\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t{showAddAnother && (\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tid=\"crudnick-add-another\"\n\t\t\t\t\t\t\t\tlabel={addAnotherText}\n\t\t\t\t\t\t\t\tlabelPosition=\"after\"\n\t\t\t\t\t\t\t\tsetValue={setAddAnother}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvalue={addAnother}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</header>\n\n\t\t\t<MyForm\n\t\t\t\tafterSubmit={afterSubmit}\n\t\t\t\tclearOnSubmit\n\t\t\t\tdefaultRow={defaultRow}\n\t\t\t\tfilterBody={filterBody}\n\t\t\t\tfilterValues={filterValues}\n\t\t\t\thtmlId=\"crudnick-add-form\"\n\t\t\t\tmethod=\"POST\"\n\t\t\t\tpath={apiPath}\n\t\t\t\tpreventEmptyRequest\n\t\t\t\trelationshipNames={relationshipNames}\n\t\t\t\trow={row}\n\t\t\t\tsetRow={setRow}\n\t\t\t\tsuccessToastText={`${capitalize(singular)} added successfully.`}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t<FormComponent row={row} setRow={setRow} {...componentProps} />\n\t\t\t</MyForm>\n\n\t\t\t{extra ? extra(row) : null}\n\t\t</>\n\t);\n}\n\nAddForm.propTypes = {\n\taddAnotherText: PropTypes.string,\n\tapiPath: PropTypes.string.isRequired,\n\tcomponent: PropTypes.func.isRequired,\n\tcomponentProps: PropTypes.object,\n\tdefaultRow: PropTypes.object,\n\textra: PropTypes.func,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\tpath: PropTypes.string.isRequired,\n\trelationshipNames: PropTypes.array,\n\tsaveButtonText: PropTypes.string,\n\tshowAddAnother: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\ttitlePrefixText: PropTypes.string,\n};\n\nAddForm.defaultProps = {\n\taddAnotherText: 'Add another',\n\tcomponentProps: {},\n\tdefaultRow: {},\n\textra: null,\n\tfilterBody: null,\n\tfilterValues: null,\n\trelationshipNames: [],\n\tsaveButtonText: 'Save',\n\tshowAddAnother: true,\n\ttitlePrefixText: 'Add',\n};\n","import Cookies from 'js-cookie';\n\nexport default class Auth {\n\tstatic login(user, token, remember) {\n\t\tCookies.set(`${process.env.REACT_APP_COOKIE_PREFIX}_user`, JSON.stringify(user), Auth.attributes(remember));\n\t\tCookies.set(`${process.env.REACT_APP_COOKIE_PREFIX}_token`, token, Auth.attributes(remember));\n\t}\n\n\tstatic refresh() {\n\t\tlet user = Auth.user();\n\t\tuser = user ? JSON.parse(user) : null;\n\t\tif (user && user.remember) {\n\t\t\tAuth.login(user, Auth.token(), user.remember);\n\t\t}\n\t}\n\n\tstatic attributes(remember) {\n\t\tconst attributes = {\n\t\t\tsameSite: 'lax',\n\t\t};\n\t\tif (remember) {\n\t\t\tattributes.expires = 365;\n\t\t}\n\t\tif (window.location.protocol === 'https:') {\n\t\t\tattributes.secure = true;\n\t\t}\n\t\treturn attributes;\n\t}\n\n\tstatic logout() {\n\t\tCookies.remove(`${process.env.REACT_APP_COOKIE_PREFIX}_user`);\n\t\tCookies.remove(`${process.env.REACT_APP_COOKIE_PREFIX}_token`);\n\t\twindow.location.href = window.location.origin + process.env.PUBLIC_URL;\n\t}\n\n\tstatic id() {\n\t\tconst user = Auth.user();\n\t\treturn user ? JSON.parse(user).id : null;\n\t}\n\n\tstatic user() {\n\t\treturn Cookies.get(`${process.env.REACT_APP_COOKIE_PREFIX}_user`);\n\t}\n\n\tstatic token() {\n\t\treturn Cookies.get(`${process.env.REACT_APP_COOKIE_PREFIX}_token`);\n\t}\n\n\tstatic isLoggedIn() {\n\t\treturn !!Auth.user() && !!Auth.token();\n\t}\n}\n","import { Field, Form, Message, Submit } from '@jlbelanger/formosa';\nimport React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from '../../MetaTitle';\n\nexport default function ForgotPassword() {\n\tconst [row, setRow] = useState({});\n\n\treturn (\n\t\t<Form\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\tclearOnSubmit\n\t\t\tmethod=\"POST\"\n\t\t\tpath=\"auth/forgot-password\"\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t\tsuccessMessageText=\"If there is an account with this email address, you will receive a password reset email shortly.\"\n\t\t>\n\t\t\t<MetaTitle title=\"Forgot your password?\" />\n\n\t\t\t<h1>Forgot your password?</h1>\n\n\t\t\t<Message />\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\tname=\"email\"\n\t\t\t\trequired\n\t\t\t\ttype=\"email\"\n\t\t\t/>\n\n\t\t\t<Submit\n\t\t\t\tlabel=\"Send reset link\"\n\t\t\t\tpostfix={(\n\t\t\t\t\t<Link className=\"formosa-button crudnick-button--link\" to=\"/\">Back to login</Link>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Form>\n\t);\n}\n","import { Field, Form, Message, Submit } from '@jlbelanger/formosa';\nimport React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Auth from '../../Utilities/Auth';\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from '../../MetaTitle';\n\nexport default function Login() {\n\tconst [row, setRow] = useState({});\n\n\tconst afterSubmit = (response) => {\n\t\tAuth.login(response.user, response.token, response.remember);\n\t\twindow.location.reload();\n\t};\n\n\treturn (\n\t\t<Form\n\t\t\tafterSubmit={afterSubmit}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\tmethod=\"POST\"\n\t\t\tpath=\"auth/login\"\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t>\n\t\t\t<MetaTitle title=\"Login\" />\n\n\t\t\t<h1>Login</h1>\n\n\t\t\t<Message />\n\n\t\t\t<Field\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tautoComplete=\"username\"\n\t\t\t\tlabel=\"Username\"\n\t\t\t\tname=\"username\"\n\t\t\t\trequired\n\t\t\t\ttype=\"text\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\tlabel=\"Password\"\n\t\t\t\tname=\"password\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tlabel=\"Remember me\"\n\t\t\t\tlabelPosition=\"after\"\n\t\t\t\tname=\"remember\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t/>\n\n\t\t\t<Submit\n\t\t\t\tlabel=\"Log in\"\n\t\t\t\tpostfix={(\n\t\t\t\t\t<Link className=\"formosa-button crudnick-button--link\" to=\"/forgot-password\">Forgot your password?</Link>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Form>\n\t);\n}\n","import { Api, FormosaContext } from '@jlbelanger/formosa';\nimport React, { useContext, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Auth from './Utilities/Auth';\nimport { ReactComponent as MenuIcon } from '../svg/menu.svg';\nimport { NavLink } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport PropTypes from 'prop-types';\n\nexport default function Nav({ nav }) {\n\tconst { formosaState } = useContext(FormosaContext);\n\tconst [showMenu, setShowMenu] = useState(false);\n\tconst logout = () => {\n\t\tApi.delete('auth/logout')\n\t\t\t.then(() => {\n\t\t\t\tAuth.logout();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (response.status === 401 || response.status === 404) {\n\t\t\t\t\tAuth.logout();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst text = response.message ? response.message : response.errors.map((err) => (err.title)).join(' ');\n\t\t\t\tformosaState.addToast(text, 'error', 10000);\n\t\t\t});\n\t};\n\tconst toggleMenu = () => {\n\t\tsetShowMenu(!showMenu);\n\t};\n\tconst hideMenu = () => {\n\t\tsetShowMenu(false);\n\t};\n\n\treturn (\n\t\t<nav id=\"crudnick-nav\">\n\t\t\t<ul className={`crudnick-list${showMenu ? ' show' : ''}`} id=\"crudnick-nav__list\">\n\t\t\t\t{nav.map(({ label, path }) => (\n\t\t\t\t\t<li className=\"crudnick-list__item\" key={path}>\n\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\tclassName=\"formosa-button crudnick-list__button\"\n\t\t\t\t\t\t\tonClick={hideMenu}\n\t\t\t\t\t\t\tto={path}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t\t<li className=\"crudnick-list__item\">\n\t\t\t\t\t<button className=\"formosa-button crudnick-list__button\" id=\"crudnick-logout\" onClick={logout} type=\"button\">Logout</button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<button className=\"formosa-button\" id=\"crudnick-menu-button\" onClick={toggleMenu} type=\"button\">\n\t\t\t\t<MenuIcon aria-hidden=\"true\" />\n\t\t\t\tMenu\n\t\t\t</button>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tnav: PropTypes.array.isRequired,\n};\n","import { Field, Form, Message, Submit } from '@jlbelanger/formosa';\nimport React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { useHistory, useParams } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from '../../MetaTitle';\n\nexport default function ResetPassword() {\n\tconst [row, setRow] = useState({});\n\tconst { token } = useParams();\n\tconst history = useHistory();\n\n\treturn (\n\t\t<Form\n\t\t\tafterSubmit={() => {\n\t\t\t\thistory.push('/');\n\t\t\t}}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\tmethod=\"PUT\"\n\t\t\tpath={`auth/reset-password/${token}`}\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t\tsuccessToastText=\"Password reset successfully.\"\n\t\t>\n\t\t\t<MetaTitle title=\"Reset password\" />\n\n\t\t\t<h1>Reset password</h1>\n\n\t\t\t<Message />\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\tname=\"email\"\n\t\t\t\trequired\n\t\t\t\ttype=\"email\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\tlabel=\"New password\"\n\t\t\t\tname=\"new_password\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\tlabel=\"Confirm new password\"\n\t\t\t\tname=\"new_password_confirmation\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Submit label=\"Reset password\" />\n\t\t</Form>\n\t);\n}\n","import { Api, FormContainer } from '@jlbelanger/formosa';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport Auth from './Utilities/Auth';\nimport ForgotPassword from './Pages/Auth/ForgotPassword';\nimport Login from './Pages/Auth/Login';\nimport Nav from './Nav';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport ResetPassword from './Pages/Auth/ResetPassword';\n\nexport default function App({\n\tarticleProps,\n\tchildren,\n\tnav,\n\trouterAttributes,\n}) {\n\tif (Auth.isLoggedIn() && !Api.getToken()) {\n\t\tApi.setToken(Auth.token());\n\t}\n\n\tdocument.addEventListener('formosaApiRequest', () => {\n\t\tAuth.refresh();\n\t});\n\n\treturn (\n\t\t<BrowserRouter {...routerAttributes}>\n\t\t\t<FormContainer>\n\t\t\t\t{Auth.isLoggedIn() && <Nav nav={nav} />}\n\t\t\t\t<article id=\"crudnick-article\" {...articleProps}>\n\t\t\t\t\t{Auth.isLoggedIn() ? children : (\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route exact path=\"/\"><Login /></Route>\n\t\t\t\t\t\t\t<Route exact path=\"/forgot-password\"><ForgotPassword /></Route>\n\t\t\t\t\t\t\t<Route exact path=\"/reset-password/:token\"><ResetPassword /></Route>\n\t\t\t\t\t\t\t<Route><Redirect to=\"/\" /></Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t)}\n\t\t\t\t</article>\n\t\t\t</FormContainer>\n\t\t</BrowserRouter>\n\t);\n}\n\nApp.propTypes = {\n\tarticleProps: PropTypes.object,\n\tchildren: PropTypes.node.isRequired,\n\tnav: PropTypes.array.isRequired,\n\trouterAttributes: PropTypes.object,\n};\n\nApp.defaultProps = {\n\tarticleProps: null,\n\trouterAttributes: null,\n};\n","import { capitalize, getErrorMessage } from '../Utilities/Helpers';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Actions from './Actions';\nimport { Api } from '@jlbelanger/formosa';\nimport get from 'get-value';\nimport MetaTitle from '../MetaTitle';\nimport MyForm from './MyForm';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function EditForm({\n\tactions,\n\tapiPath,\n\tcomponent,\n\tcomponentProps,\n\textra,\n\tfilterBody,\n\tfilterValues,\n\tname,\n\tpath,\n\trelationshipNames,\n\tsaveButtonText,\n\tsingular,\n\tsubpages,\n\ttitlePrefixText,\n\ttransform,\n\turl,\n\t...otherProps\n}) {\n\tconst { id } = useParams();\n\tconst [row, setRow] = useState(null);\n\tconst [error, setError] = useState(false);\n\n\tuseEffect(() => {\n\t\tApi.get(url)\n\t\t\t.then((response) => {\n\t\t\t\tsetError(null);\n\t\t\t\tif (transform) {\n\t\t\t\t\tsetRow(transform(response));\n\t\t\t\t} else {\n\t\t\t\t\tsetRow(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tdocument.getElementById('crudnick-logout').click();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetError(response);\n\t\t\t\tsetRow(null);\n\t\t\t});\n\t\treturn () => {};\n\t}, [url]);\n\n\tconst FormComponent = component;\n\tcomponentProps.formType = 'edit';\n\tconst metaTitle = row ? `${titlePrefixText} ${typeof name === 'function' ? name(row) : get(row, name)}` : '';\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={metaTitle} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1>{`${titlePrefixText} ${singular}`}</h1>\n\t\t\t\t{row && (\n\t\t\t\t\t<Actions\n\t\t\t\t\t\tapiPath={apiPath}\n\t\t\t\t\t\tcurrentPage=\"/\"\n\t\t\t\t\t\tpath={path}\n\t\t\t\t\t\tsaveButtonText={saveButtonText}\n\t\t\t\t\t\trow={row}\n\t\t\t\t\t\tsetRow={setRow}\n\t\t\t\t\t\tsingular={singular}\n\t\t\t\t\t\tsubpages={subpages}\n\t\t\t\t\t>\n\t\t\t\t\t\t{actions ? actions(row, setRow) : null}\n\t\t\t\t\t</Actions>\n\t\t\t\t)}\n\t\t\t</header>\n\n\t\t\t{error && <div className=\"formosa-message formosa-message--error\">{getErrorMessage(error)}</div>}\n\n\t\t\t{row && (\n\t\t\t\t<MyForm\n\t\t\t\t\tfilterBody={filterBody}\n\t\t\t\t\tfilterValues={filterValues}\n\t\t\t\t\thtmlId=\"crudnick-edit-form\"\n\t\t\t\t\tid={id}\n\t\t\t\t\tmethod=\"PUT\"\n\t\t\t\t\tpath={apiPath}\n\t\t\t\t\tpreventEmptyRequest\n\t\t\t\t\trelationshipNames={relationshipNames}\n\t\t\t\t\trow={row}\n\t\t\t\t\tsetRow={setRow}\n\t\t\t\t\tsuccessToastText={`${capitalize(singular)} saved successfully.`}\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t<FormComponent row={row} setRow={setRow} {...componentProps} />\n\t\t\t\t</MyForm>\n\t\t\t)}\n\n\t\t\t{row && extra ? extra(row) : null}\n\t\t</>\n\t);\n}\n\nEditForm.propTypes = {\n\tactions: PropTypes.func,\n\tapiPath: PropTypes.string.isRequired,\n\tcomponent: PropTypes.func.isRequired,\n\tcomponentProps: PropTypes.object,\n\textra: PropTypes.func,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\tname: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tpath: PropTypes.string.isRequired,\n\trelationshipNames: PropTypes.array,\n\tsaveButtonText: PropTypes.string,\n\tsingular: PropTypes.string.isRequired,\n\tsubpages: PropTypes.array,\n\ttitlePrefixText: PropTypes.string,\n\ttransform: PropTypes.func,\n\turl: PropTypes.string.isRequired,\n};\n\nEditForm.defaultProps = {\n\tactions: null,\n\tcomponentProps: {},\n\textra: null,\n\tfilterBody: null,\n\tfilterValues: null,\n\tname: null,\n\trelationshipNames: [],\n\tsaveButtonText: 'Save',\n\tsubpages: [],\n\ttitlePrefixText: 'Edit',\n\ttransform: null,\n};\n","import { Api, Input } from '@jlbelanger/formosa';\nimport { cleanKey, filterByKeys, getErrorMessage, sortByKey } from '../Utilities/Helpers';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as ArrowIcon } from '../../svg/arrow.svg';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport get from 'get-value';\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from '../MetaTitle';\nimport PropTypes from 'prop-types';\n\nexport default function IndexTable({ columns, defaultOptions, path, title, url }) {\n\tconst [rows, setRows] = useState(null);\n\tconst [filteredRows, setFilteredRows] = useState([]);\n\tconst [error, setError] = useState(false);\n\tconst [sortKey, setSortKey] = useState('name');\n\tconst [sortDir, setSortDir] = useState('asc');\n\tconst [filters, setFilters] = useState(() => {\n\t\tconst output = {};\n\t\tcolumns.forEach((column) => {\n\t\t\toutput[cleanKey(column.key)] = '';\n\t\t});\n\t\treturn output;\n\t});\n\n\tuseEffect(() => {\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'sortKey')) {\n\t\t\tsetSortKey(defaultOptions.sortKey);\n\t\t}\n\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'sortDir')) {\n\t\t\tsetSortDir(defaultOptions.sortDir);\n\t\t}\n\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'filters')) {\n\t\t\tsetFilters(defaultOptions.filters);\n\t\t}\n\n\t\tApi.get(url, false)\n\t\t\t.then((response) => {\n\t\t\t\tsetError(null);\n\t\t\t\tsetRows(response);\n\t\t\t\tsetFilteredRows(response);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tdocument.getElementById('crudnick-logout').click();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetError(response);\n\t\t\t\tsetRows(null);\n\t\t\t\tsetFilteredRows([]);\n\t\t\t});\n\t\treturn () => {};\n\t}, [url]);\n\n\tconst sort = (e) => {\n\t\tconst newSortKey = e.target.getAttribute('data-key');\n\t\tlet newSortDir;\n\t\tif (sortKey === newSortKey) {\n\t\t\tnewSortDir = sortDir === 'asc' ? 'desc' : 'asc';\n\t\t} else {\n\t\t\tnewSortDir = 'asc';\n\t\t}\n\n\t\tsetSortKey(newSortKey);\n\t\tsetSortDir(newSortDir);\n\n\t\tsetRows(sortByKey(rows, newSortKey, newSortDir));\n\t\tsetFilteredRows(sortByKey(filteredRows, newSortKey, newSortDir));\n\t};\n\n\tconst numRows = rows ? rows.length : 0;\n\tlet numResults = ` (${filteredRows.length.toLocaleString()}`;\n\tif (filteredRows.length !== numRows) {\n\t\tnumResults += ` of ${numRows.toLocaleString()}`;\n\t}\n\tnumResults += ` result${numRows === 1 ? '' : 's'})`;\n\n\tcolumns = columns.map((column) => {\n\t\tif (column.link) {\n\t\t\tcolumn.fn = (row, value) => (\n\t\t\t\t<Link className=\"crudnick-link--table\" to={`/${path}/${row.id}`}>\n\t\t\t\t\t{value}\n\t\t\t\t</Link>\n\t\t\t);\n\t\t} else if (column.type === 'checkbox') {\n\t\t\tcolumn.fn = (_row, value) => (value ? (<CheckIcon aria-hidden=\"true\" height={16} width={16} />) : null);\n\t\t\tcolumn.size = 4;\n\t\t}\n\t\treturn column;\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={title} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1>\n\t\t\t\t\t<span>{title}</span>\n\t\t\t\t\t<small>{rows ? numResults : null}</small>\n\t\t\t\t</h1>\n\t\t\t\t<ul className=\"crudnick-list\">\n\t\t\t\t\t<li className=\"crudnick-list__item\">\n\t\t\t\t\t\t<Link className=\"formosa-button crudnick-list__button\" to={`/${path}/add`}>Add new</Link>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</header>\n\n\t\t\t{error ? (\n\t\t\t\t<div className=\"formosa-message formosa-message--error\">{getErrorMessage(error)}</div>\n\t\t\t) : (\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{columns.map((column) => (\n\t\t\t\t\t\t\t\t<th key={column.key} style={{ width: column.size ? 0 : null }}>\n\t\t\t\t\t\t\t\t\t{column.disableSort ? (column.shortLabel || column.label) : (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"formosa-button\"\n\t\t\t\t\t\t\t\t\t\t\tdata-key={column.sortKey || cleanKey(column.key)}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={rows === null}\n\t\t\t\t\t\t\t\t\t\t\tonClick={sort}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{column.shortLabel || column.label}\n\t\t\t\t\t\t\t\t\t\t\t{sortKey === (column.sortKey || cleanKey(column.key)) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<ArrowIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`crudnick-icon--caret ${sortDir === 'desc' ? 'flip' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\theight={12}\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth={12}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{columns.map(({ key, disableSearch, size }) => (\n\t\t\t\t\t\t\t\t<td className=\"formosa-input-wrapper--search\" key={key}>\n\t\t\t\t\t\t\t\t\t{!disableSearch && (\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"formosa-field__input\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={rows === null}\n\t\t\t\t\t\t\t\t\t\t\tsetValue={(newValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst newFilters = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...filters,\n\t\t\t\t\t\t\t\t\t\t\t\t\t[cleanKey(key)]: newValue,\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilters(newFilters);\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst newRows = filterByKeys(rows, newFilters);\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilteredRows(newRows);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={filters[cleanKey(key)]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{rows === null\n\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colSpan={columns.length}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"formosa-spinner\" style={{ justifyContent: 'center', margin: '16px auto' }}>Loading...</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t) : filteredRows.map((row) => (\n\t\t\t\t\t\t\t\t<tr key={row.id}>\n\t\t\t\t\t\t\t\t\t{columns.map(({ fn, key }) => (\n\t\t\t\t\t\t\t\t\t\t<td className={`crudnick-cell--${key}`} key={key}>\n\t\t\t\t\t\t\t\t\t\t\t{fn ? fn(row, get(row, cleanKey(key)), key) : get(row, cleanKey(key))}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nIndexTable.propTypes = {\n\tcolumns: PropTypes.array.isRequired,\n\tdefaultOptions: PropTypes.object.isRequired,\n\tpath: PropTypes.string.isRequired,\n\ttitle: PropTypes.string.isRequired,\n\turl: PropTypes.string.isRequired,\n};\n","import './style.scss';\nimport actions from './js/Components/Actions';\nimport addForm from './js/Components/AddForm';\nimport app from './js/App';\nimport auth from './js/Utilities/Auth';\nimport editForm from './js/Components/EditForm';\nimport forgotPassword from './js/Pages/Auth/ForgotPassword';\nimport indexTable from './js/Components/IndexTable';\nimport login from './js/Pages/Auth/Login';\nimport metaTitle from './js/MetaTitle';\nimport myForm from './js/Components/MyForm';\nimport nav from './js/Nav';\nimport resetPassword from './js/Pages/Auth/ResetPassword';\n\nexport const Actions = actions;\nexport const AddForm = addForm;\nexport const App = app;\nexport const Auth = auth;\nexport const EditForm = editForm;\nexport const ForgotPassword = forgotPassword;\nexport const IndexTable = indexTable;\nexport const Login = login;\nexport const MetaTitle = metaTitle;\nexport const MyForm = myForm;\nexport const Nav = nav;\nexport const ResetPassword = resetPassword;\n"],"names":["capitalize","s","replace","a","toUpperCase","cleanKey","key","escapeRegExp","string","filterByKey","records","value","toLowerCase","escapedValue","filter","record","recordValue","get","toString","match","RegExp","sort","b","aValue","bValue","aPos","indexOf","bPos","filterByKeys","filters","Object","keys","forEach","getErrorMessage","response","message","errors","map","error","title","join","sortByKey","dir","aVal","undefined","bVal","localeCompare","Actions","apiPath","children","currentPage","path","row","saveButtonText","setRow","showSave","singular","subpages","history","useHistory","useContext","FormosaContext","formosaState","onDelete","e","preventDefault","confirm","disableWarningPrompt","Api","id","then","addToast","push","enableWarningPrompt","text","err","React","NavLink","Form","process","env","REACT_APP_FRONTEND_URL","url","page","propTypes","PropTypes","isRequired","node","object","func","bool","array","defaultProps","MetaTitle","useEffect","metaTitle","REACT_APP_TITLE","document","querySelector","innerText","MyFormPrompt","FormContext","formState","Prompt","dirty","length","MyForm","showWarningPrompt","otherProps","AddForm","addAnotherText","component","componentProps","defaultRow","extra","filterBody","filterValues","relationshipNames","showAddAnother","titlePrefixText","useState","addAnother","setAddAnother","afterSubmit","FormComponent","formType","Field","Auth","login","user","token","remember","Cookies","set","REACT_APP_COOKIE_PREFIX","JSON","stringify","attributes","refresh","parse","sameSite","expires","window","location","protocol","secure","logout","remove","href","origin","PUBLIC_URL","isLoggedIn","ForgotPassword","Message","Submit","Link","Login","reload","Nav","nav","showMenu","setShowMenu","status","toggleMenu","hideMenu","label","MenuIcon","ResetPassword","useParams","App","articleProps","routerAttributes","getToken","setToken","addEventListener","BrowserRouter","FormContainer","Switch","Route","Redirect","EditForm","actions","name","transform","setError","getElementById","click","oneOfType","IndexTable","columns","defaultOptions","rows","setRows","filteredRows","setFilteredRows","sortKey","setSortKey","sortDir","setSortDir","output","column","setFilters","prototype","hasOwnProperty","call","newSortKey","target","getAttribute","newSortDir","numRows","numResults","toLocaleString","link","fn","type","_row","CheckIcon","size","width","disableSort","shortLabel","ArrowIcon","disableSearch","Input","newValue","newFilters","newRows","justifyContent","margin","addForm","app","auth","editForm","forgotPassword","indexTable","myForm","resetPassword"],"mappings":"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"}