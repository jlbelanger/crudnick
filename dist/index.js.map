{"version":3,"file":"index.js","sources":["../src/js/Utilities/String.js","../src/js/Utilities/Auth.js","../src/js/Utilities/Errors.js","../src/js/Components/Modal.js","../src/js/Components/Actions.js","../src/js/Components/MetaTitle.js","../src/js/Components/MyFormPrompt.js","../src/js/Components/MyForm.js","../src/js/Components/AddForm.js","../src/js/Components/Nav.js","../src/js/Pages/Auth/ForgotPassword.js","../src/js/Pages/Auth/LoginForm.js","../src/js/Pages/Auth/Login.js","../src/js/Pages/Auth/ResetPassword.js","../src/js/Routes.js","../src/js/App.js","../src/js/Components/Error.js","../src/js/Components/EditForm.js","../src/js/Utilities/Filter.js","../src/js/Utilities/Sort.js","../src/js/Components/IndexTable.js"],"sourcesContent":["export const capitalize = (s) => (\n\ts.replace(/(?:^|\\s)\\S/g, (a) => (a.toUpperCase()))\n);\n\nexport const cleanKey = (key) => (key.replace(/^relationships\\./, ''));\n","import Cookies from 'js-cookie';\n\nexport default class Auth {\n\tstatic login(user, token, remember) {\n\t\tCookies.set(`${process.env.REACT_APP_COOKIE_PREFIX}_user`, JSON.stringify(user), Auth.attributes(remember));\n\t\tCookies.set(`${process.env.REACT_APP_COOKIE_PREFIX}_token`, token, Auth.attributes(remember));\n\t}\n\n\tstatic refresh() {\n\t\tlet user = Auth.user();\n\t\tuser = user ? JSON.parse(user) : null;\n\t\tif (user && user.remember) {\n\t\t\tAuth.login(user, Auth.token(), user.remember);\n\t\t}\n\t}\n\n\tstatic attributes(remember) {\n\t\tconst attributes = {\n\t\t\tsameSite: 'lax',\n\t\t};\n\t\tif (remember) {\n\t\t\tattributes.expires = 365;\n\t\t}\n\t\tif (window.location.protocol === 'https:') {\n\t\t\tattributes.secure = true;\n\t\t}\n\t\treturn attributes;\n\t}\n\n\tstatic logout(status = '') {\n\t\tCookies.remove(`${process.env.REACT_APP_COOKIE_PREFIX}_user`);\n\t\tCookies.remove(`${process.env.REACT_APP_COOKIE_PREFIX}_token`);\n\t\twindow.location.href = `${process.env.PUBLIC_URL ? process.env.PUBLIC_URL : '/'}${status ? `?status=${status}` : ''}`;\n\t}\n\n\tstatic id() {\n\t\tconst user = Auth.user();\n\t\treturn user ? JSON.parse(user).id : null;\n\t}\n\n\tstatic user() {\n\t\treturn Cookies.get(`${process.env.REACT_APP_COOKIE_PREFIX}_user`);\n\t}\n\n\tstatic token() {\n\t\treturn Cookies.get(`${process.env.REACT_APP_COOKIE_PREFIX}_token`);\n\t}\n\n\tstatic isLoggedIn() {\n\t\treturn !!Auth.user() && !!Auth.token();\n\t}\n}\n","import Auth from './Auth';\n\nexport const errorMessageText = (response, logout = true) => { // eslint-disable-line import/prefer-default-export\n\tif (logout && response.status === 401) {\n\t\treturn Auth.logout(response.status);\n\t}\n\treturn `Error: ${response.errors.map((e) => (e.title)).join(' ')}`;\n};\n","import React, { useEffect, useRef } from 'react'; // eslint-disable-line import/no-unresolved\nimport PropTypes from 'prop-types';\n\nexport default function Modal({\n\tcancelable,\n\tcancelButtonAttributes,\n\tcancelButtonClass,\n\tcancelButtonText,\n\tchildren,\n\tevent,\n\tokButtonAttributes,\n\tokButtonClass,\n\tokButtonText,\n\tonClickCancel,\n\tonClickOk,\n\ttext,\n}) {\n\tconst dialogRef = useRef(null);\n\n\tconst onKeydown = (e) => {\n\t\tif (e.key === 'Escape' && onClickCancel) {\n\t\t\tonClickCancel();\n\t\t}\n\t};\n\n\tconst onClickDialog = (e) => {\n\t\tif (e.target.tagName === 'DIALOG' && onClickCancel) {\n\t\t\tonClickCancel();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.body.classList.add('crudnick-modal-open');\n\n\t\tif (cancelable) {\n\t\t\tdocument.addEventListener('keydown', onKeydown);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.body.classList.remove('crudnick-modal-open');\n\n\t\t\tif (cancelable) {\n\t\t\t\tdocument.removeEventListener('keydown', onKeydown);\n\t\t\t}\n\n\t\t\tif (event.target) {\n\t\t\t\tevent.target.focus();\n\t\t\t}\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (dialogRef && dialogRef.current && dialogRef.current.getAttribute('open') === null) {\n\t\t\tdialogRef.current.showModal();\n\t\t\tdialogRef.current.focus();\n\n\t\t\tif (cancelable) {\n\t\t\t\tdialogRef.current.addEventListener('click', onClickDialog);\n\t\t\t}\n\t\t}\n\t}, [dialogRef]);\n\n\treturn (\n\t\t<dialog className=\"crudnick-modal\" ref={dialogRef} tabIndex={-1}>\n\t\t\t<div className=\"crudnick-modal__box\">\n\t\t\t\t{children || (<p className=\"crudnick-modal__text\">{text}</p>)}\n\t\t\t\t<p className=\"crudnick-modal__options\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button ${okButtonClass}`.trim()}\n\t\t\t\t\t\tonClick={onClickOk}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...okButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{okButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button ${cancelButtonClass}`.trim()}\n\t\t\t\t\t\tonClick={onClickCancel}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...cancelButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{cancelButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</dialog>\n\t);\n}\n\nModal.propTypes = {\n\tcancelable: PropTypes.bool,\n\tcancelButtonAttributes: PropTypes.object,\n\tcancelButtonClass: PropTypes.string,\n\tcancelButtonText: PropTypes.string,\n\tchildren: PropTypes.node,\n\tevent: PropTypes.object.isRequired,\n\tokButtonAttributes: PropTypes.object,\n\tokButtonClass: PropTypes.string,\n\tokButtonText: PropTypes.string,\n\tonClickCancel: PropTypes.func,\n\tonClickOk: PropTypes.func,\n\ttext: PropTypes.string,\n};\n\nModal.defaultProps = {\n\tcancelable: true,\n\tcancelButtonAttributes: null,\n\tcancelButtonClass: 'crudnick-button--secondary',\n\tcancelButtonText: 'Cancel',\n\tchildren: null,\n\tokButtonAttributes: null,\n\tokButtonClass: '',\n\tokButtonText: 'OK',\n\tonClickCancel: null,\n\tonClickOk: null,\n\ttext: null,\n};\n","import { Api, FormosaContext } from '@jlbelanger/formosa';\nimport { NavLink, useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { capitalize } from '../Utilities/String';\nimport { errorMessageText } from '../Utilities/Errors';\nimport Modal from './Modal';\nimport PropTypes from 'prop-types';\n\nexport default function Actions({\n\tapiPath,\n\tchildren,\n\tcurrentPage,\n\tpath,\n\trow,\n\tsaveButtonText,\n\tsetActionError,\n\tshowDelete,\n\tshowSave,\n\tsingular,\n\tsubpages,\n}) {\n\tconst history = useHistory();\n\tconst { addToast, disableWarningPrompt, enableWarningPrompt } = useContext(FormosaContext);\n\tconst [showModal, setShowModal] = useState(false);\n\tconst submitRef = useRef(null);\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 's' && e.metaKey && submitRef && submitRef.current) {\n\t\t\te.preventDefault();\n\t\t\tsubmitRef.current.click();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', onKeyDown);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\tconst onDelete = () => {\n\t\tsetShowModal(false);\n\t\tdisableWarningPrompt();\n\n\t\tApi.delete(`${apiPath}/${row.id}`)\n\t\t\t.catch((response) => {\n\t\t\t\tif (setActionError) {\n\t\t\t\t\tsetActionError(errorMessageText(response));\n\t\t\t\t} else {\n\t\t\t\t\taddToast(errorMessageText(response), 'error', 10000);\n\t\t\t\t}\n\t\t\t\tenableWarningPrompt();\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\taddToast(`${capitalize(singular)} deleted successfully.`, 'success');\n\t\t\t\thistory.push(`/${path}`);\n\t\t\t\tenableWarningPrompt();\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<ul className=\"crudnick-list\">\n\t\t\t{showSave && (\n\t\t\t\t<li>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button\"\n\t\t\t\t\t\tdata-cy=\"save\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tref={submitRef}\n\t\t\t\t\t\tform=\"crudnick-edit-form\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{currentPage !== '/' && (\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink className=\"crudnick-list__button formosa-button\" to={`/${path}/${row.id}`}>Edit</NavLink>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{showDelete && (\n\t\t\t\t<li>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button formosa-button--danger\"\n\t\t\t\t\t\tdata-cy=\"delete\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (setActionError) {\n\t\t\t\t\t\t\t\tsetActionError(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetShowModal(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</button>\n\t\t\t\t\t{showModal && (\n\t\t\t\t\t\t<Modal\n\t\t\t\t\t\t\tevent={showModal}\n\t\t\t\t\t\t\tokButtonAttributes={{ 'data-cy': 'modal-delete' }}\n\t\t\t\t\t\t\tokButtonClass=\"formosa-button--danger\"\n\t\t\t\t\t\t\tokButtonText=\"Delete\"\n\t\t\t\t\t\t\tonClickOk={onDelete}\n\t\t\t\t\t\t\tonClickCancel={() => { setShowModal(false); }}\n\t\t\t\t\t\t\ttext={`Are you sure you want to delete this ${singular}?`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{process.env.REACT_APP_FRONTEND_URL && row.url && (\n\t\t\t\t<li>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button crudnick-button--secondary\"\n\t\t\t\t\t\thref={`${process.env.REACT_APP_FRONTEND_URL}${row.url}`}\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{subpages.map((page) => (\n\t\t\t\t<li key={page}>\n\t\t\t\t\t<NavLink\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button crudnick-button--secondary\"\n\t\t\t\t\t\tto={`/${path}/${row.id}/${page.toLowerCase()}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{page}\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t\t{children}\n\t\t</ul>\n\t);\n}\n\nActions.propTypes = {\n\tapiPath: PropTypes.string.isRequired,\n\tchildren: PropTypes.node,\n\tcurrentPage: PropTypes.string.isRequired,\n\tpath: PropTypes.string.isRequired,\n\tsaveButtonText: PropTypes.string,\n\tsetActionError: PropTypes.func,\n\trow: PropTypes.object,\n\tshowDelete: PropTypes.bool,\n\tshowSave: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\tsubpages: PropTypes.array,\n};\n\nActions.defaultProps = {\n\tchildren: null,\n\trow: null,\n\tsaveButtonText: 'Save',\n\tsetActionError: null,\n\tshowDelete: true,\n\tshowSave: true,\n\tsubpages: [],\n};\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function MetaTitle({ title }) {\n\tuseEffect(() => {\n\t\tlet metaTitle = title;\n\t\tif (process.env.REACT_APP_TITLE) {\n\t\t\tif (metaTitle) {\n\t\t\t\tmetaTitle += ' | ';\n\t\t\t}\n\t\t\tmetaTitle += process.env.REACT_APP_TITLE;\n\t\t}\n\t\tdocument.querySelector('title').innerText = metaTitle;\n\t}, [title]);\n\n\treturn null;\n}\n\nMetaTitle.propTypes = {\n\ttitle: PropTypes.string,\n};\n\nMetaTitle.defaultProps = {\n\ttitle: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { FormContext } from '@jlbelanger/formosa';\nimport { Prompt } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function MyFormPrompt() {\n\tconst { getDirtyKeys } = useContext(FormContext);\n\treturn (\n\t\t<Prompt\n\t\t\twhen={getDirtyKeys().length > 0}\n\t\t\tmessage=\"You have unsaved changes. Are you sure you want to leave this page?\"\n\t\t/>\n\t);\n}\n","import { Form, FormosaContext } from '@jlbelanger/formosa';\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport MyFormPrompt from './MyFormPrompt';\nimport PropTypes from 'prop-types';\n\nexport default function MyForm({ children, ...otherProps }) {\n\tconst { showWarningPrompt } = useContext(FormosaContext);\n\n\treturn (\n\t\t<Form {...otherProps}>\n\t\t\t{children}\n\t\t\t{showWarningPrompt && <MyFormPrompt />}\n\t\t</Form>\n\t);\n}\n\nMyForm.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n};\n","import React, { useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { capitalize } from '../Utilities/String';\nimport { errorMessageText } from '../Utilities/Errors';\nimport { Field } from '@jlbelanger/formosa';\nimport MetaTitle from './MetaTitle';\nimport MyForm from './MyForm';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function AddForm({\n\taddAnotherText,\n\tapiPath,\n\tcomponent,\n\tcomponentProps,\n\tdefaultRow,\n\textra,\n\tfilterBody,\n\tfilterValues,\n\tpath,\n\trelationshipNames,\n\tsaveButtonText,\n\tshowAddAnother,\n\tsingular,\n\ttitlePrefixText,\n\t...otherProps\n}) {\n\tconst [row, setRow] = useState(defaultRow);\n\tconst [addAnother, setAddAnother] = useState(false);\n\tconst history = useHistory();\n\tconst submitRef = useRef(null);\n\n\tconst afterSubmitSuccess = (response) => {\n\t\tif (!addAnother) {\n\t\t\thistory.push(`/${path}/${response.id}`);\n\t\t}\n\t};\n\n\tconst FormComponent = component;\n\tcomponentProps.formType = 'add';\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 's' && e.metaKey && submitRef && submitRef.current) {\n\t\t\te.preventDefault();\n\t\t\tsubmitRef.current.click();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', onKeyDown);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={`${titlePrefixText} ${singular}`} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1 data-cy=\"title\">{`${titlePrefixText} ${singular}`}</h1>\n\t\t\t\t<ul className=\"crudnick-list\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"formosa-button\"\n\t\t\t\t\t\t\tform=\"crudnick-add-form\"\n\t\t\t\t\t\t\tdata-cy=\"save\"\n\t\t\t\t\t\t\tref={submitRef}\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t{showAddAnother && (\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tid=\"crudnick-add-another\"\n\t\t\t\t\t\t\t\tlabel={addAnotherText}\n\t\t\t\t\t\t\t\tlabelPosition=\"after\"\n\t\t\t\t\t\t\t\tsetValue={setAddAnother}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvalue={addAnother}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</header>\n\n\t\t\t<MyForm\n\t\t\t\tafterSubmitSuccess={afterSubmitSuccess}\n\t\t\t\tclearOnSubmit\n\t\t\t\tdefaultRow={defaultRow}\n\t\t\t\terrorMessageText={errorMessageText}\n\t\t\t\tfilterBody={filterBody}\n\t\t\t\tfilterValues={filterValues}\n\t\t\t\thtmlId=\"crudnick-add-form\"\n\t\t\t\tmethod=\"POST\"\n\t\t\t\tpath={apiPath}\n\t\t\t\tpreventEmptyRequest\n\t\t\t\trelationshipNames={relationshipNames}\n\t\t\t\trow={row}\n\t\t\t\tsetRow={setRow}\n\t\t\t\tsuccessToastText={`${capitalize(singular)} added successfully.`}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t<FormComponent row={row} setRow={setRow} {...componentProps} />\n\t\t\t</MyForm>\n\n\t\t\t{extra ? extra(row) : null}\n\t\t</>\n\t);\n}\n\nAddForm.propTypes = {\n\taddAnotherText: PropTypes.string,\n\tapiPath: PropTypes.string.isRequired,\n\tcomponent: PropTypes.func.isRequired,\n\tcomponentProps: PropTypes.object,\n\tdefaultRow: PropTypes.object,\n\textra: PropTypes.func,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\tpath: PropTypes.string.isRequired,\n\trelationshipNames: PropTypes.array,\n\tsaveButtonText: PropTypes.string,\n\tshowAddAnother: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\ttitlePrefixText: PropTypes.string,\n};\n\nAddForm.defaultProps = {\n\taddAnotherText: 'Add another',\n\tcomponentProps: {},\n\tdefaultRow: {},\n\textra: null,\n\tfilterBody: null,\n\tfilterValues: null,\n\trelationshipNames: [],\n\tsaveButtonText: 'Save',\n\tshowAddAnother: true,\n\ttitlePrefixText: 'Add',\n};\n","import { Api, FormosaContext } from '@jlbelanger/formosa';\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Auth from '../Utilities/Auth';\nimport { errorMessageText } from '../Utilities/Errors';\nimport { ReactComponent as MenuIcon } from '../../svg/menu.svg';\nimport { NavLink } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { ReactComponent as XIcon } from '../../svg/x.svg';\n\nexport default function Nav({ nav }) {\n\tconst { addToast } = useContext(FormosaContext);\n\tconst dialogRef = useRef(null);\n\tconst breakpoint = 1025;\n\tconst [showInlineNav, setShowInlineNav] = useState(window.innerWidth >= breakpoint);\n\n\tconst onTransitionEnd = () => {\n\t\tdocument.body.classList.remove('show-nav');\n\t\tif (dialogRef.current.tagName === 'DIALOG') {\n\t\t\tdialogRef.current.close();\n\t\t}\n\t\tdialogRef.current.removeEventListener('transitionend', onTransitionEnd);\n\t};\n\n\tconst onResize = () => {\n\t\tsetShowInlineNav(window.innerWidth >= breakpoint);\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', onResize);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', onResize);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (showInlineNav) {\n\t\t\thideMenu(); // eslint-disable-line no-use-before-define\n\t\t\tonTransitionEnd();\n\t\t}\n\t}, [showInlineNav]);\n\n\tconst logout = () => {\n\t\tApi.delete('auth/logout')\n\t\t\t.catch((response) => {\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\taddToast(errorMessageText(response), 'error');\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tAuth.logout();\n\t\t\t});\n\t};\n\n\tconst hideMenu = () => {\n\t\tdocument.body.classList.remove('animate-nav');\n\t\tdialogRef.current.addEventListener('transitionend', onTransitionEnd);\n\t};\n\n\tconst openMenu = () => {\n\t\tdocument.body.classList.add('show-nav');\n\t\tdialogRef.current.showModal();\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.body.classList.add('animate-nav');\n\t\t}, 10);\n\t};\n\n\tconst onCancelDialog = (e) => {\n\t\te.preventDefault();\n\t\thideMenu();\n\t};\n\n\tconst onClickDialog = (e) => {\n\t\tif (e.target.tagName === 'DIALOG') {\n\t\t\thideMenu();\n\t\t}\n\t};\n\n\tconst Dialog = showInlineNav ? 'div' : 'dialog';\n\n\treturn (\n\t\t<nav id=\"crudnick-nav\">\n\t\t\t<Dialog id=\"crudnick-nav__dialog\" ref={dialogRef} onCancel={onCancelDialog} onClick={onClickDialog}>\n\t\t\t\t<button\n\t\t\t\t\taria-controls=\"crudnick-nav__dialog\"\n\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\tclassName=\"formosa-button crudnick-menu-button\"\n\t\t\t\t\tid=\"crudnick-menu-close-button\"\n\t\t\t\t\tonClick={hideMenu}\n\t\t\t\t\ttitle=\"Close Menu\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<XIcon aria-hidden=\"true\" />\n\t\t\t\t\tClose Menu\n\t\t\t\t</button>\n\t\t\t\t<ul id=\"crudnick-nav__list\">\n\t\t\t\t\t{nav.map(({ label, path }) => (\n\t\t\t\t\t\t<li className=\"crudnick-list__item\" key={path}>\n\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\tclassName=\"formosa-button crudnick-list__button\"\n\t\t\t\t\t\t\t\tonClick={hideMenu}\n\t\t\t\t\t\t\t\tto={path}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t\t<li className=\"crudnick-list__item\">\n\t\t\t\t\t\t<button className=\"formosa-button crudnick-list__button\" data-cy=\"logout\" id=\"crudnick-logout\" onClick={logout} type=\"button\">\n\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</Dialog>\n\t\t\t<button\n\t\t\t\taria-controls=\"crudnick-nav__dialog\"\n\t\t\t\taria-expanded=\"true\"\n\t\t\t\tclassName=\"formosa-button crudnick-menu-button\"\n\t\t\t\tdata-cy=\"menu\"\n\t\t\t\tid=\"crudnick-menu-show-button\"\n\t\t\t\tonClick={openMenu}\n\t\t\t\ttitle=\"Show Menu\"\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<MenuIcon aria-hidden=\"true\" />\n\t\t\t\tShow Menu\n\t\t\t</button>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tnav: PropTypes.array.isRequired,\n};\n","import { Alert, Field, Form, FormAlert, Submit } from '@jlbelanger/formosa';\nimport { Link, useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { errorMessageText } from '../../Utilities/Errors';\nimport MetaTitle from '../../Components/MetaTitle';\n\nexport default function ForgotPassword() {\n\tconst history = useHistory();\n\tconst [row, setRow] = useState({});\n\tconst [message, setMessage] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tif (urlSearchParams.get('expired')) {\n\t\t\tsetMessage({\n\t\t\t\ttext: 'Error: This link has expired.',\n\t\t\t\ttype: 'error',\n\t\t\t});\n\t\t\thistory.replace({ search: '' });\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<Form\n\t\t\tbeforeSubmit={() => { setMessage(false); return true; }}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\tclearOnSubmit\n\t\t\terrorMessageText={errorMessageText}\n\t\t\tmethod=\"POST\"\n\t\t\tpath=\"auth/forgot-password\"\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t\tsuccessMessageText=\"If there is an account with this email address, you will receive a password reset email shortly.\"\n\t\t>\n\t\t\t<MetaTitle title=\"Forgot your password?\" />\n\n\t\t\t<h1>Forgot your password?</h1>\n\n\t\t\t<FormAlert />\n\t\t\t{message && (<Alert type={message.type}>{message.text}</Alert>)}\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\tname=\"email\"\n\t\t\t\trequired\n\t\t\t\ttype=\"email\"\n\t\t\t/>\n\n\t\t\t<Submit\n\t\t\t\tlabel=\"Send link\"\n\t\t\t\tpostfix={(\n\t\t\t\t\t<Link className=\"formosa-button crudnick-button--link\" to=\"/\">Back to login</Link>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Form>\n\t);\n}\n","import { Alert, Api, Field, FormAlert, FormContext, Submit } from '@jlbelanger/formosa';\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { errorMessageText } from '../../Utilities/Errors';\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from '../../Components/MetaTitle';\nimport PropTypes from 'prop-types';\n\nexport default function LoginForm({ message, row, setMessage, setShowVerificationButton, showVerificationButton }) {\n\tconst { clearAlert } = useContext(FormContext);\n\n\tconst resendVerificationEmail = () => {\n\t\tclearAlert();\n\t\tsetMessage(null);\n\t\tsetShowVerificationButton(false);\n\t\tconst data = {\n\t\t\tusername: row.username || showVerificationButton,\n\t\t};\n\t\tApi.post('auth/resend-verification', JSON.stringify(data))\n\t\t\t.catch((response) => {\n\t\t\t\tsetMessage(errorMessageText(response));\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetMessage({\n\t\t\t\t\ttext: 'Check your email to continue the registration process.',\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title=\"Login\" />\n\n\t\t\t<h1>Login</h1>\n\n\t\t\t{message && (<Alert type={message.type}>{message.text}</Alert>)}\n\t\t\t{showVerificationButton && (\n\t\t\t\t<p className={`formosa-alert formosa-alert--${showVerificationButton === true ? 'error' : 'success'} post-alert-button`}>\n\t\t\t\t\t<button className=\"formosa-button button--secondary\" onClick={resendVerificationEmail} type=\"button\">\n\t\t\t\t\t\tResend verification email\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t)}\n\n\t\t\t<FormAlert />\n\n\t\t\t<Field\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tautoComplete=\"username\"\n\t\t\t\tlabel=\"Username\"\n\t\t\t\tname=\"username\"\n\t\t\t\trequired\n\t\t\t\ttype=\"text\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\tlabel=\"Password\"\n\t\t\t\tname=\"password\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tlabel=\"Remember me\"\n\t\t\t\tlabelPosition=\"after\"\n\t\t\t\tname=\"remember\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t/>\n\n\t\t\t<Submit\n\t\t\t\tlabel=\"Log in\"\n\t\t\t\tpostfix={(\n\t\t\t\t\t<Link className=\"formosa-button crudnick-button--link\" to=\"/forgot-password\">Forgot password?</Link>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nLoginForm.propTypes = {\n\tmessage: PropTypes.object,\n\trow: PropTypes.object.isRequired,\n\tsetMessage: PropTypes.func.isRequired,\n\tsetShowVerificationButton: PropTypes.func.isRequired,\n\tshowVerificationButton: PropTypes.bool,\n};\n\nLoginForm.defaultProps = {\n\tmessage: null,\n\tshowVerificationButton: false,\n};\n","import React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Auth from '../../Utilities/Auth';\nimport { errorMessageText } from '../../Utilities/Errors';\nimport { Form } from '@jlbelanger/formosa';\nimport LoginForm from './LoginForm';\nimport { useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function Login() {\n\tconst history = useHistory();\n\tconst [row, setRow] = useState({});\n\tconst [message, setMessage] = useState(null);\n\tconst [showVerificationButton, setShowVerificationButton] = useState(false);\n\n\tconst beforeSubmit = () => {\n\t\tsetMessage(null);\n\t\tsetShowVerificationButton(false);\n\t\treturn true;\n\t};\n\n\tconst afterSubmitFailure = (response) => {\n\t\tsetShowVerificationButton(response.errors[0].code === 'auth.unverified');\n\t};\n\n\tconst afterSubmitSuccess = (response) => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tlet redirect;\n\t\tif (urlSearchParams.get('redirect') && urlSearchParams.get('redirect')[0] === '/') {\n\t\t\tredirect = urlSearchParams.get('redirect');\n\t\t} else {\n\t\t\tredirect = process.env.PUBLIC_URL || '/';\n\t\t}\n\t\tAuth.login(response.user, response.token, response.user.remember);\n\t\twindow.location.href = redirect;\n\t};\n\n\tuseEffect(() => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tif (urlSearchParams.get('status') === '401') {\n\t\t\tsetMessage({\n\t\t\t\ttext: 'Your session has expired. Please log in again.',\n\t\t\t\ttype: 'warning',\n\t\t\t});\n\t\t\thistory.replace({ search: '' });\n\t\t} else if (urlSearchParams.get('verify')) {\n\t\t\tsetMessage({\n\t\t\t\ttext: `Check your email (${urlSearchParams.get('email')}) to continue the registration process.`,\n\t\t\t\ttype: 'success',\n\t\t\t});\n\t\t\tsetShowVerificationButton(urlSearchParams.get('username'));\n\t\t\thistory.replace({ search: '' });\n\t\t} else if (urlSearchParams.get('expired')) {\n\t\t\thistory.push('/forgot-password?expired=1');\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<Form\n\t\t\tafterSubmitFailure={afterSubmitFailure}\n\t\t\tafterSubmitSuccess={afterSubmitSuccess}\n\t\t\tbeforeSubmit={beforeSubmit}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\terrorMessageText={(response) => (errorMessageText(response, false))}\n\t\t\tmethod=\"POST\"\n\t\t\tpath=\"auth/login\"\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t>\n\t\t\t<LoginForm\n\t\t\t\tmessage={message}\n\t\t\t\trow={row}\n\t\t\t\tsetMessage={setMessage}\n\t\t\t\tshowVerificationButton={showVerificationButton}\n\t\t\t\tsetShowVerificationButton={setShowVerificationButton}\n\t\t\t/>\n\t\t</Form>\n\t);\n}\n","import { Field, Form, FormAlert, Submit } from '@jlbelanger/formosa';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { useHistory, useParams } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport { errorMessageText } from '../../Utilities/Errors';\nimport MetaTitle from '../../Components/MetaTitle';\n\nexport default function ResetPassword() {\n\tconst [row, setRow] = useState({});\n\tconst { token } = useParams();\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tif (urlSearchParams.get('expires') < Math.floor(Date.now() / 1000)) {\n\t\t\thistory.push('/?expired=1');\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<Form\n\t\t\tafterSubmitSuccess={() => {\n\t\t\t\thistory.push('/');\n\t\t\t}}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\terrorMessageText={errorMessageText}\n\t\t\tmethod=\"PUT\"\n\t\t\tpath={`auth/reset-password/${token}${window.location.search}`}\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t\tsuccessToastText=\"Password reset successfully.\"\n\t\t>\n\t\t\t<MetaTitle title=\"Reset password\" />\n\n\t\t\t<h1>Reset password</h1>\n\n\t\t\t<FormAlert />\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\tname=\"email\"\n\t\t\t\trequired\n\t\t\t\ttype=\"email\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\tlabel=\"New password\"\n\t\t\t\tname=\"new_password\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\tlabel=\"Confirm new password\"\n\t\t\t\tname=\"new_password_confirmation\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Submit label=\"Reset password\" />\n\t\t</Form>\n\t);\n}\n","import { Redirect, Route, Switch, useLocation } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport ForgotPassword from './Pages/Auth/ForgotPassword';\nimport Login from './Pages/Auth/Login';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport ResetPassword from './Pages/Auth/ResetPassword';\n\nexport default function Routes() {\n\tconst location = useLocation();\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route exact path=\"/\"><Login /></Route>\n\t\t\t<Route exact path=\"/forgot-password\"><ForgotPassword /></Route>\n\t\t\t<Route exact path=\"/reset-password/:token\"><ResetPassword /></Route>\n\t\t\t<Route><Redirect to={`/?redirect=${encodeURIComponent(`${process.env.PUBLIC_URL}${location.pathname}${location.search}`)}`} /></Route>\n\t\t</Switch>\n\t);\n}\n","import { Api, FormContainer } from '@jlbelanger/formosa';\nimport Auth from './Utilities/Auth';\nimport { BrowserRouter } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport Nav from './Components/Nav';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport Routes from './Routes';\n\nexport default function App({\n\tarticleProps,\n\tchildren,\n\tnav,\n\trouterAttributes,\n}) {\n\tif (Auth.isLoggedIn() && !Api.getToken()) {\n\t\tApi.setToken(Auth.token());\n\t}\n\n\tdocument.addEventListener('formosaApiRequest', () => {\n\t\tAuth.refresh();\n\t});\n\n\t// Accessibility: skip to content (https://www.bignerdranch.com/blog/web-accessibility-skip-navigation-links/).\n\tconst onClick = (e) => {\n\t\te.preventDefault();\n\t\tconst id = e.target.getAttribute('href').split('#')[1];\n\t\tconst elem = document.getElementById(id);\n\t\telem.setAttribute('tabindex', -1);\n\t\telem.addEventListener('blur', () => {\n\t\t\telem.removeAttribute('tabindex');\n\t\t});\n\t\telem.focus();\n\t};\n\n\treturn (\n\t\t<BrowserRouter {...routerAttributes}>\n\t\t\t<a href=\"#crudnick-article\" id=\"crudnick-skip\" onClick={onClick}>Skip to content</a>\n\t\t\t<FormContainer>\n\t\t\t\t{Auth.isLoggedIn() && <Nav nav={nav} />}\n\t\t\t\t<article id=\"crudnick-article\" {...articleProps}>\n\t\t\t\t\t{Auth.isLoggedIn() ? children : (<Routes />)}\n\t\t\t\t</article>\n\t\t\t</FormContainer>\n\t\t</BrowserRouter>\n\t);\n}\n\nApp.propTypes = {\n\tarticleProps: PropTypes.object,\n\tchildren: PropTypes.node.isRequired,\n\tnav: PropTypes.array.isRequired,\n\trouterAttributes: PropTypes.object,\n};\n\nApp.defaultProps = {\n\tarticleProps: null,\n\trouterAttributes: null,\n};\n","import { Alert } from '@jlbelanger/formosa';\nimport Auth from '../Utilities/Auth';\nimport MetaTitle from './MetaTitle';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Error({ error }) {\n\tif (error.status === 401) {\n\t\tAuth.logout(error.status);\n\t\treturn null;\n\t}\n\n\tlet message = 'Error loading data. Please try again later.';\n\tif (error.errors[0].title) {\n\t\tmessage = `Error: ${error.errors[0].title}`;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title=\"Error\" />\n\t\t\t<Alert type=\"error\">{message}</Alert>\n\t\t</>\n\t);\n}\n\nError.propTypes = {\n\terror: PropTypes.object.isRequired,\n};\n","import { Alert, Api } from '@jlbelanger/formosa';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Actions from './Actions';\nimport { capitalize } from '../Utilities/String';\nimport Error from './Error';\nimport { errorMessageText } from '../Utilities/Errors';\nimport get from 'get-value';\nimport MetaTitle from './MetaTitle';\nimport MyForm from './MyForm';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function EditForm({\n\tactions,\n\tapiPath,\n\tcomponent,\n\tcomponentProps,\n\textra,\n\tfilterBody,\n\tfilterValues,\n\tname,\n\tpath,\n\trelationshipNames,\n\tsaveButtonText,\n\tshowDelete,\n\tshowSave,\n\tsingular,\n\tsubpages,\n\ttitlePrefixText,\n\ttransform,\n\turl,\n\t...otherProps\n}) {\n\tconst { id } = useParams();\n\tconst [row, setRow] = useState(null);\n\tconst [error, setError] = useState(false);\n\tconst [actionError, setActionError] = useState(false);\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tapi(url)\n\t\t\t.catch((response) => {\n\t\t\t\tsetError(response);\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (transform) {\n\t\t\t\t\tsetRow(transform(response));\n\t\t\t\t} else {\n\t\t\t\t\tsetRow(response);\n\t\t\t\t}\n\t\t\t});\n\t}, [url]);\n\n\tif (error) {\n\t\treturn (\n\t\t\t<Error error={error} />\n\t\t);\n\t}\n\n\tconst afterSubmitFailure = (e) => {\n\t\tsetActionError(errorMessageText(e));\n\t};\n\n\tconst FormComponent = component;\n\tcomponentProps.formType = 'edit';\n\tconst metaTitle = row ? `${titlePrefixText} ${typeof name === 'function' ? name(row) : get(row, name)}` : '';\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={metaTitle} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1 data-cy=\"title\">{`${titlePrefixText} ${singular}`}</h1>\n\t\t\t\t{row && (\n\t\t\t\t\t<Actions\n\t\t\t\t\t\tapiPath={apiPath}\n\t\t\t\t\t\tcurrentPage=\"/\"\n\t\t\t\t\t\tpath={path}\n\t\t\t\t\t\tsaveButtonText={saveButtonText}\n\t\t\t\t\t\trow={row}\n\t\t\t\t\t\tsetActionError={setActionError}\n\t\t\t\t\t\tshowDelete={showDelete}\n\t\t\t\t\t\tshowSave={showSave}\n\t\t\t\t\t\tsingular={singular}\n\t\t\t\t\t\tsubpages={subpages}\n\t\t\t\t\t>\n\t\t\t\t\t\t{actions ? actions(row, setRow) : null}\n\t\t\t\t\t</Actions>\n\t\t\t\t)}\n\t\t\t</header>\n\n\t\t\t{actionError && (<Alert type=\"error\">{actionError}</Alert>)}\n\n\t\t\t{row && (\n\t\t\t\t<MyForm\n\t\t\t\t\tafterSubmitFailure={afterSubmitFailure}\n\t\t\t\t\tbeforeSubmit={() => { setActionError(false); return true; }}\n\t\t\t\t\tfilterBody={filterBody}\n\t\t\t\t\tfilterValues={filterValues}\n\t\t\t\t\thtmlId=\"crudnick-edit-form\"\n\t\t\t\t\tid={id}\n\t\t\t\t\tmethod=\"PUT\"\n\t\t\t\t\tpath={apiPath}\n\t\t\t\t\tpreventEmptyRequest\n\t\t\t\t\trelationshipNames={relationshipNames}\n\t\t\t\t\trow={row}\n\t\t\t\t\tsetRow={setRow}\n\t\t\t\t\tsuccessToastText={`${capitalize(singular)} saved successfully.`}\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t<FormComponent row={row} setRow={setRow} {...componentProps} />\n\t\t\t\t</MyForm>\n\t\t\t)}\n\n\t\t\t{row && extra ? extra(row) : null}\n\t\t</>\n\t);\n}\n\nEditForm.propTypes = {\n\tactions: PropTypes.func,\n\tapiPath: PropTypes.string.isRequired,\n\tcomponent: PropTypes.func.isRequired,\n\tcomponentProps: PropTypes.object,\n\textra: PropTypes.func,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\tname: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tpath: PropTypes.string.isRequired,\n\trelationshipNames: PropTypes.array,\n\tsaveButtonText: PropTypes.string,\n\tshowDelete: PropTypes.bool,\n\tshowSave: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\tsubpages: PropTypes.array,\n\ttitlePrefixText: PropTypes.string,\n\ttransform: PropTypes.func,\n\turl: PropTypes.string.isRequired,\n};\n\nEditForm.defaultProps = {\n\tactions: null,\n\tcomponentProps: {},\n\textra: null,\n\tfilterBody: null,\n\tfilterValues: null,\n\tname: null,\n\trelationshipNames: [],\n\tsaveButtonText: 'Save',\n\tshowDelete: true,\n\tshowSave: true,\n\tsubpages: [],\n\ttitlePrefixText: 'Edit',\n\ttransform: null,\n};\n","import get from 'get-value';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nconst escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst filterByKey = (records, key, value) => {\n\tvalue = value.trim().toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = (get(record, key) || '').toString().replace(/<[^>]+?>/g, '').toLowerCase();\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = (get(a, key) || '').toString().toLowerCase();\n\t\tconst bValue = (get(b, key) || '').toString().toLowerCase();\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n\nexport const filterByKeys = (records, filters) => { // eslint-disable-line import/prefer-default-export\n\tObject.keys(filters).forEach((key) => {\n\t\trecords = filterByKey(records, key, filters[key]);\n\t});\n\treturn records;\n};\n","import get from 'get-value';\n\nexport const sortByKey = (records, key, dir) => ( // eslint-disable-line import/prefer-default-export\n\trecords.sort((a, b) => {\n\t\tlet aVal = get(a, key);\n\t\tif (aVal === undefined || aVal === null) {\n\t\t\taVal = '';\n\t\t}\n\t\tlet bVal = get(b, key);\n\t\tif (bVal === undefined || bVal === null) {\n\t\t\tbVal = '';\n\t\t}\n\t\tif (aVal === bVal) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (aVal === '') {\n\t\t\treturn 1;\n\t\t}\n\t\tif (bVal === '') {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (typeof aVal === 'number' && typeof bVal === 'number') {\n\t\t\tif (dir === 'asc') {\n\t\t\t\treturn aVal < bVal ? -1 : 1;\n\t\t\t}\n\t\t\treturn aVal > bVal ? -1 : 1;\n\t\t}\n\n\t\taVal = aVal.toString();\n\t\tbVal = bVal.toString();\n\t\treturn dir === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n\t})\n);\n","import { Alert, Api, Input } from '@jlbelanger/formosa';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as ArrowIcon } from '../../svg/arrow.svg';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport { cleanKey } from '../Utilities/String';\nimport { errorMessageText } from '../Utilities/Errors';\nimport { filterByKeys } from '../Utilities/Filter';\nimport get from 'get-value';\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from './MetaTitle';\nimport PropTypes from 'prop-types';\nimport { sortByKey } from '../Utilities/Sort';\n\nexport default function IndexTable({ columns, defaultOptions, path, title, url }) {\n\tconst [rows, setRows] = useState(null);\n\tconst [filteredRows, setFilteredRows] = useState([]);\n\tconst [rowsError, setRowsError] = useState(false);\n\tconst [sortKey, setSortKey] = useState('name');\n\tconst [sortDir, setSortDir] = useState('asc');\n\tconst [filters, setFilters] = useState(() => {\n\t\tconst output = {};\n\t\tcolumns.forEach((column) => {\n\t\t\toutput[cleanKey(column.key)] = '';\n\t\t});\n\t\treturn output;\n\t});\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'sortKey')) {\n\t\t\tsetSortKey(defaultOptions.sortKey);\n\t\t}\n\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'sortDir')) {\n\t\t\tsetSortDir(defaultOptions.sortDir);\n\t\t}\n\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'filters')) {\n\t\t\tsetFilters(defaultOptions.filters);\n\t\t}\n\n\t\tapi(url, false)\n\t\t\t.catch((response) => {\n\t\t\t\tsetRowsError(errorMessageText(response));\n\t\t\t\tsetRows(null);\n\t\t\t\tsetFilteredRows([]);\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetRows(response);\n\t\t\t\tsetFilteredRows(response);\n\t\t\t});\n\t}, [url]);\n\n\tconst sort = (e) => {\n\t\tconst newSortKey = e.target.getAttribute('data-key');\n\t\tlet newSortDir;\n\t\tif (sortKey === newSortKey) {\n\t\t\tnewSortDir = sortDir === 'asc' ? 'desc' : 'asc';\n\t\t} else {\n\t\t\tnewSortDir = 'asc';\n\t\t}\n\n\t\tsetSortKey(newSortKey);\n\t\tsetSortDir(newSortDir);\n\n\t\tsetRows(sortByKey(rows, newSortKey, newSortDir));\n\t\tsetFilteredRows(sortByKey(filteredRows, newSortKey, newSortDir));\n\t};\n\n\tconst numRows = rows ? rows.length : 0;\n\tlet numResults = ` (${filteredRows.length.toLocaleString()}`;\n\tif (filteredRows.length !== numRows) {\n\t\tnumResults += ` of ${numRows.toLocaleString()}`;\n\t}\n\tnumResults += ` result${numRows === 1 ? '' : 's'})`;\n\n\tcolumns = columns.map((column) => {\n\t\tif (column.link) {\n\t\t\tcolumn.fn = (row, value) => (\n\t\t\t\t<Link className=\"crudnick-link--table\" to={`/${path}/${row.id}`}>\n\t\t\t\t\t{value}\n\t\t\t\t</Link>\n\t\t\t);\n\t\t} else if (column.type === 'checkbox') {\n\t\t\tcolumn.fn = (_row, value) => (value ? (<CheckIcon aria-hidden=\"true\" height={16} width={16} />) : null);\n\t\t\tcolumn.size = 4;\n\t\t}\n\t\treturn column;\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={title} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1>\n\t\t\t\t\t<span data-cy=\"title\">{title}</span>\n\t\t\t\t\t<small data-cy=\"num-results\">{rows ? numResults : null}</small>\n\t\t\t\t</h1>\n\t\t\t\t<ul className=\"crudnick-list\">\n\t\t\t\t\t<li className=\"crudnick-list__item\">\n\t\t\t\t\t\t<Link data-cy=\"add\" className=\"formosa-button crudnick-list__button\" to={`/${path}/add`}>Add new</Link>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</header>\n\n\t\t\t{rowsError ? (\n\t\t\t\t<Alert type=\"error\">{rowsError}</Alert>\n\t\t\t) : (\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{columns.map((column) => (\n\t\t\t\t\t\t\t\t<th className={column.size ? 'crudnick-column--shrink' : null} key={column.key} scope=\"col\" {...column.thAttributes}>\n\t\t\t\t\t\t\t\t\t{column.disableSort ? (column.shortLabel || column.label) : (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={`Sort by ${column.label}`}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"formosa-button\"\n\t\t\t\t\t\t\t\t\t\t\tdata-key={column.sortKey || cleanKey(column.key)}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={rows === null}\n\t\t\t\t\t\t\t\t\t\t\tonClick={sort}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{column.shortLabel || column.label}\n\t\t\t\t\t\t\t\t\t\t\t{sortKey === (column.sortKey || cleanKey(column.key)) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<ArrowIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`crudnick-icon--caret ${sortDir === 'desc' ? 'flip' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\theight={12}\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth={12}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{columns.map(({ key, disableSearch, label, size }) => (\n\t\t\t\t\t\t\t\t<td className=\"formosa-input-wrapper--search\" key={key}>\n\t\t\t\t\t\t\t\t\t{!disableSearch && (\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\taria-label={`Search ${label}`}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"formosa-field__input\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={rows === null}\n\t\t\t\t\t\t\t\t\t\t\tsetValue={(newValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst newFilters = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...filters,\n\t\t\t\t\t\t\t\t\t\t\t\t\t[cleanKey(key)]: newValue,\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilters(newFilters);\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst newRows = filterByKeys(rows, newFilters);\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilteredRows(newRows);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={filters[cleanKey(key)]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{rows === null\n\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colSpan={columns.length}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"formosa-spinner\" role=\"status\">\n\t\t\t\t\t\t\t\t\t\t\tLoading...\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t) : filteredRows.map((row) => (\n\t\t\t\t\t\t\t\t<tr key={row.id}>\n\t\t\t\t\t\t\t\t\t{columns.map(({ fn, key }) => (\n\t\t\t\t\t\t\t\t\t\t<td className={`crudnick-cell--${key}`} key={key}>\n\t\t\t\t\t\t\t\t\t\t\t{fn ? fn(row, get(row, cleanKey(key)), key) : get(row, cleanKey(key))}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nIndexTable.propTypes = {\n\tcolumns: PropTypes.array.isRequired,\n\tdefaultOptions: PropTypes.object.isRequired,\n\tpath: PropTypes.string.isRequired,\n\ttitle: PropTypes.string.isRequired,\n\turl: PropTypes.string.isRequired,\n};\n"],"names":["capitalize","s","replace","a","toUpperCase","cleanKey","key","Auth","login","user","token","remember","Cookies","set","process","env","REACT_APP_COOKIE_PREFIX","JSON","stringify","attributes","refresh","parse","sameSite","expires","window","location","protocol","secure","logout","status","remove","href","PUBLIC_URL","id","get","isLoggedIn","errorMessageText","response","errors","map","e","title","join","Modal","_ref","cancelable","cancelButtonAttributes","cancelButtonClass","cancelButtonText","children","event","okButtonAttributes","okButtonClass","okButtonText","onClickCancel","onClickOk","text","dialogRef","useRef","onKeydown","onClickDialog","target","tagName","useEffect","document","body","classList","add","addEventListener","removeEventListener","focus","current","getAttribute","showModal","React","createElement","className","ref","tabIndex","_extends","trim","onClick","type","propTypes","PropTypes","bool","object","string","node","isRequired","func","defaultProps","Actions","apiPath","currentPage","path","row","saveButtonText","setActionError","showDelete","showSave","singular","subpages","history","useHistory","addToast","disableWarningPrompt","enableWarningPrompt","useContext","FormosaContext","setShowModal","useState","submitRef","onKeyDown","metaKey","preventDefault","click","onDelete","Api","delete","catch","then","push","form","NavLink","to","REACT_APP_FRONTEND_URL","url","rel","page","toLowerCase","array","MetaTitle","metaTitle","REACT_APP_TITLE","querySelector","innerText","MyFormPrompt","getDirtyKeys","FormContext","Prompt","when","length","message","MyForm","otherProps","showWarningPrompt","Form","AddForm","addAnotherText","component","componentProps","defaultRow","extra","filterBody","filterValues","relationshipNames","showAddAnother","titlePrefixText","setRow","addAnother","setAddAnother","afterSubmitSuccess","FormComponent","formType","Fragment","Field","label","labelPosition","setValue","value","clearOnSubmit","htmlId","method","preventEmptyRequest","successToastText","Nav","nav","breakpoint","showInlineNav","setShowInlineNav","innerWidth","onTransitionEnd","close","onResize","hideMenu","openMenu","setTimeout","onCancelDialog","Dialog","onCancel","XIcon","_ref2","activeClassName","MenuIcon","ForgotPassword","setMessage","urlSearchParams","URLSearchParams","search","beforeSubmit","showMessage","successMessageText","FormAlert","Alert","autoComplete","name","required","Submit","postfix","Link","LoginForm","setShowVerificationButton","showVerificationButton","clearAlert","resendVerificationEmail","data","username","post","autoCapitalize","Login","afterSubmitFailure","code","redirect","ResetPassword","useParams","Math","floor","Date","now","Routes","useLocation","Switch","Route","exact","Redirect","encodeURIComponent","pathname","App","articleProps","routerAttributes","getToken","setToken","split","elem","getElementById","setAttribute","removeAttribute","BrowserRouter","FormContainer","Error","error","EditForm","actions","transform","setError","actionError","api","instance","oneOfType","escapeRegExp","filterByKey","records","escapedValue","filter","record","recordValue","toString","match","RegExp","sort","b","aValue","bValue","aPos","indexOf","bPos","filterByKeys","filters","Object","keys","forEach","sortByKey","dir","aVal","undefined","bVal","localeCompare","IndexTable","columns","defaultOptions","rows","setRows","filteredRows","setFilteredRows","rowsError","setRowsError","sortKey","setSortKey","sortDir","setSortDir","setFilters","output","column","prototype","hasOwnProperty","call","newSortKey","newSortDir","numRows","numResults","toLocaleString","link","fn","_row","CheckIcon","height","width","size","scope","thAttributes","disableSort","shortLabel","disabled","ArrowIcon","disableSearch","Input","newValue","newFilters","newRows","colSpan","role","_ref3"],"mappings":"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"}