{"version":3,"file":"index.js","sources":["../src/js/Utilities/String.js","../src/js/Utilities/Auth.js","../src/js/Utilities/Errors.js","../src/js/Components/Modal.js","../src/js/Components/Actions.js","../src/js/Components/MetaTitle.js","../src/js/Components/MyFormPrompt.js","../src/js/Components/MyForm.js","../src/js/Components/AddForm.js","../src/js/Components/Nav.js","../src/js/Pages/Auth/ForgotPassword.js","../src/js/Pages/Auth/LoginForm.js","../src/js/Pages/Auth/Login.js","../src/js/Pages/Auth/ResetPassword.js","../src/js/Routes.js","../src/js/App.js","../src/js/Components/Error.js","../src/js/Components/EditForm.js","../src/js/Utilities/Filter.js","../src/js/Utilities/Sort.js","../src/js/Components/IndexTable.js","../src/index.js"],"sourcesContent":["export const capitalize = (s) => (\n\ts.replace(/(?:^|\\s)\\S/g, (a) => (a.toUpperCase()))\n);\n\nexport const cleanKey = (key) => (key.replace(/^relationships\\./, ''));\n","import Cookies from 'js-cookie';\n\nexport default class Auth {\n\tstatic login(user, token, remember) {\n\t\tCookies.set(`${process.env.REACT_APP_COOKIE_PREFIX}_user`, JSON.stringify(user), Auth.attributes(remember));\n\t\tCookies.set(`${process.env.REACT_APP_COOKIE_PREFIX}_token`, token, Auth.attributes(remember));\n\t}\n\n\tstatic refresh() {\n\t\tlet user = Auth.user();\n\t\tuser = user ? JSON.parse(user) : null;\n\t\tif (user && user.remember) {\n\t\t\tAuth.login(user, Auth.token(), user.remember);\n\t\t}\n\t}\n\n\tstatic attributes(remember) {\n\t\tconst attributes = {\n\t\t\tsameSite: 'lax',\n\t\t};\n\t\tif (remember) {\n\t\t\tattributes.expires = 365;\n\t\t}\n\t\tif (window.location.protocol === 'https:') {\n\t\t\tattributes.secure = true;\n\t\t}\n\t\treturn attributes;\n\t}\n\n\tstatic logout(status = '') {\n\t\tCookies.remove(`${process.env.REACT_APP_COOKIE_PREFIX}_user`);\n\t\tCookies.remove(`${process.env.REACT_APP_COOKIE_PREFIX}_token`);\n\t\twindow.location.href = `${process.env.PUBLIC_URL ? process.env.PUBLIC_URL : '/'}${status ? `?status=${status}` : ''}`;\n\t}\n\n\tstatic id() {\n\t\tconst user = Auth.user();\n\t\treturn user ? JSON.parse(user).id : null;\n\t}\n\n\tstatic user() {\n\t\treturn Cookies.get(`${process.env.REACT_APP_COOKIE_PREFIX}_user`);\n\t}\n\n\tstatic token() {\n\t\treturn Cookies.get(`${process.env.REACT_APP_COOKIE_PREFIX}_token`);\n\t}\n\n\tstatic isLoggedIn() {\n\t\treturn !!Auth.user() && !!Auth.token();\n\t}\n}\n","import Auth from './Auth';\n\nexport const errorMessageText = (response, logout = true) => { // eslint-disable-line import/prefer-default-export\n\tif (logout && response.status === 401) {\n\t\treturn Auth.logout(response.status);\n\t}\n\treturn `Error: ${response.errors.map((e) => (e.title)).join(' ')}`;\n};\n","import React, { useEffect, useRef } from 'react'; // eslint-disable-line import/no-unresolved\nimport PropTypes from 'prop-types';\n\nexport default function Modal({\n\tcancelable,\n\tcancelButtonAttributes,\n\tcancelButtonClass,\n\tcancelButtonText,\n\tchildren,\n\tevent,\n\tokButtonAttributes,\n\tokButtonClass,\n\tokButtonText,\n\tonClickCancel,\n\tonClickOk,\n\ttext,\n}) {\n\tconst dialogRef = useRef(null);\n\n\tconst onKeydown = (e) => {\n\t\tif (e.key === 'Escape' && onClickCancel) {\n\t\t\tonClickCancel();\n\t\t}\n\t};\n\n\tconst onClickDialog = (e) => {\n\t\tif (e.target.tagName === 'DIALOG' && onClickCancel) {\n\t\t\tonClickCancel();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.body.classList.add('crudnick-modal-open');\n\n\t\tif (cancelable) {\n\t\t\tdocument.addEventListener('keydown', onKeydown);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.body.classList.remove('crudnick-modal-open');\n\n\t\t\tif (cancelable) {\n\t\t\t\tdocument.removeEventListener('keydown', onKeydown);\n\t\t\t}\n\n\t\t\tif (event.target) {\n\t\t\t\tevent.target.focus();\n\t\t\t}\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (dialogRef && dialogRef.current && dialogRef.current.getAttribute('open') === null) {\n\t\t\tdialogRef.current.showModal();\n\t\t\tdialogRef.current.focus();\n\n\t\t\tif (cancelable) {\n\t\t\t\tdialogRef.current.addEventListener('click', onClickDialog);\n\t\t\t}\n\t\t}\n\t}, [dialogRef]);\n\n\treturn (\n\t\t<dialog className=\"crudnick-modal\" ref={dialogRef} tabIndex={-1}>\n\t\t\t<div className=\"crudnick-modal__box\">\n\t\t\t\t{children || (<p className=\"crudnick-modal__text\">{text}</p>)}\n\t\t\t\t<p className=\"crudnick-modal__options\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button ${okButtonClass}`.trim()}\n\t\t\t\t\t\tonClick={onClickOk}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...okButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{okButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button ${cancelButtonClass}`.trim()}\n\t\t\t\t\t\tonClick={onClickCancel}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...cancelButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{cancelButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</dialog>\n\t);\n}\n\nModal.propTypes = {\n\tcancelable: PropTypes.bool,\n\tcancelButtonAttributes: PropTypes.object,\n\tcancelButtonClass: PropTypes.string,\n\tcancelButtonText: PropTypes.string,\n\tchildren: PropTypes.node,\n\tevent: PropTypes.object.isRequired,\n\tokButtonAttributes: PropTypes.object,\n\tokButtonClass: PropTypes.string,\n\tokButtonText: PropTypes.string,\n\tonClickCancel: PropTypes.func,\n\tonClickOk: PropTypes.func,\n\ttext: PropTypes.string,\n};\n\nModal.defaultProps = {\n\tcancelable: true,\n\tcancelButtonAttributes: null,\n\tcancelButtonClass: 'crudnick-button--secondary',\n\tcancelButtonText: 'Cancel',\n\tchildren: null,\n\tokButtonAttributes: null,\n\tokButtonClass: '',\n\tokButtonText: 'OK',\n\tonClickCancel: null,\n\tonClickOk: null,\n\ttext: null,\n};\n","import { Api, FormosaContext } from '@jlbelanger/formosa';\nimport { NavLink, useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { capitalize } from '../Utilities/String';\nimport { errorMessageText } from '../Utilities/Errors';\nimport Modal from './Modal';\nimport PropTypes from 'prop-types';\n\nexport default function Actions({\n\tapiPath,\n\tchildren,\n\tcurrentPage,\n\tpath,\n\trow,\n\tsaveButtonText,\n\tsetActionError,\n\tshowDelete,\n\tshowSave,\n\tsingular,\n\tsubpages,\n}) {\n\tconst history = useHistory();\n\tconst { addToast, disableWarningPrompt, enableWarningPrompt } = useContext(FormosaContext);\n\tconst [showModal, setShowModal] = useState(false);\n\tconst submitRef = useRef(null);\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 's' && e.metaKey && submitRef && submitRef.current) {\n\t\t\te.preventDefault();\n\t\t\tsubmitRef.current.click();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', onKeyDown);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\tconst onDelete = () => {\n\t\tsetShowModal(false);\n\t\tdisableWarningPrompt();\n\n\t\tApi.delete(`${apiPath}/${row.id}`)\n\t\t\t.catch((response) => {\n\t\t\t\tif (setActionError) {\n\t\t\t\t\tsetActionError(errorMessageText(response));\n\t\t\t\t} else {\n\t\t\t\t\taddToast(errorMessageText(response), 'error', 10000);\n\t\t\t\t}\n\t\t\t\tenableWarningPrompt();\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\taddToast(`${capitalize(singular)} deleted successfully.`, 'success');\n\t\t\t\thistory.push(`/${path}`);\n\t\t\t\tenableWarningPrompt();\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<ul className=\"crudnick-list\">\n\t\t\t{showSave && (\n\t\t\t\t<li>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button\"\n\t\t\t\t\t\tdata-cy=\"save\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tref={submitRef}\n\t\t\t\t\t\tform=\"crudnick-edit-form\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{currentPage !== '/' && (\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink className=\"crudnick-list__button formosa-button\" to={`/${path}/${row.id}`}>Edit</NavLink>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{showDelete && (\n\t\t\t\t<li>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button formosa-button--danger\"\n\t\t\t\t\t\tdata-cy=\"delete\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (setActionError) {\n\t\t\t\t\t\t\t\tsetActionError(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetShowModal(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</button>\n\t\t\t\t\t{showModal && (\n\t\t\t\t\t\t<Modal\n\t\t\t\t\t\t\tevent={showModal}\n\t\t\t\t\t\t\tokButtonAttributes={{ 'data-cy': 'modal-delete' }}\n\t\t\t\t\t\t\tokButtonClass=\"formosa-button--danger\"\n\t\t\t\t\t\t\tokButtonText=\"Delete\"\n\t\t\t\t\t\t\tonClickOk={onDelete}\n\t\t\t\t\t\t\tonClickCancel={() => { setShowModal(false); }}\n\t\t\t\t\t\t\ttext={`Are you sure you want to delete this ${singular}?`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{process.env.REACT_APP_FRONTEND_URL && row.url && (\n\t\t\t\t<li>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button crudnick-button--secondary\"\n\t\t\t\t\t\thref={`${process.env.REACT_APP_FRONTEND_URL}${row.url}`}\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{subpages.map((page) => (\n\t\t\t\t<li key={page}>\n\t\t\t\t\t<NavLink\n\t\t\t\t\t\tclassName=\"crudnick-list__button formosa-button crudnick-button--secondary\"\n\t\t\t\t\t\tto={`/${path}/${row.id}/${page.toLowerCase()}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{page}\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t\t{children}\n\t\t</ul>\n\t);\n}\n\nActions.propTypes = {\n\tapiPath: PropTypes.string.isRequired,\n\tchildren: PropTypes.node,\n\tcurrentPage: PropTypes.string.isRequired,\n\tpath: PropTypes.string.isRequired,\n\tsaveButtonText: PropTypes.string,\n\tsetActionError: PropTypes.func,\n\trow: PropTypes.object,\n\tshowDelete: PropTypes.bool,\n\tshowSave: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\tsubpages: PropTypes.array,\n};\n\nActions.defaultProps = {\n\tchildren: null,\n\trow: null,\n\tsaveButtonText: 'Save',\n\tsetActionError: null,\n\tshowDelete: true,\n\tshowSave: true,\n\tsubpages: [],\n};\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function MetaTitle({ title }) {\n\tuseEffect(() => {\n\t\tlet metaTitle = title;\n\t\tif (process.env.REACT_APP_TITLE) {\n\t\t\tif (metaTitle) {\n\t\t\t\tmetaTitle += ' | ';\n\t\t\t}\n\t\t\tmetaTitle += process.env.REACT_APP_TITLE;\n\t\t}\n\t\tdocument.querySelector('title').innerText = metaTitle;\n\t}, [title]);\n\n\treturn null;\n}\n\nMetaTitle.propTypes = {\n\ttitle: PropTypes.string,\n};\n\nMetaTitle.defaultProps = {\n\ttitle: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { FormContext } from '@jlbelanger/formosa';\nimport { Prompt } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function MyFormPrompt() {\n\tconst { getDirtyKeys } = useContext(FormContext);\n\treturn (\n\t\t<Prompt\n\t\t\twhen={getDirtyKeys().length > 0}\n\t\t\tmessage=\"You have unsaved changes. Are you sure you want to leave this page?\"\n\t\t/>\n\t);\n}\n","import { Form, FormosaContext } from '@jlbelanger/formosa';\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport MyFormPrompt from './MyFormPrompt';\nimport PropTypes from 'prop-types';\n\nexport default function MyForm({ children, ...otherProps }) {\n\tconst { showWarningPrompt } = useContext(FormosaContext);\n\n\treturn (\n\t\t<Form {...otherProps}>\n\t\t\t{children}\n\t\t\t{showWarningPrompt && <MyFormPrompt />}\n\t\t</Form>\n\t);\n}\n\nMyForm.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n};\n","import React, { useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { capitalize } from '../Utilities/String';\nimport { errorMessageText } from '../Utilities/Errors';\nimport { Field } from '@jlbelanger/formosa';\nimport MetaTitle from './MetaTitle';\nimport MyForm from './MyForm';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function AddForm({\n\taddAnotherText,\n\tapiPath,\n\tcomponent,\n\tcomponentProps,\n\tdefaultRow,\n\textra,\n\tfilterBody,\n\tfilterValues,\n\tpath,\n\trelationshipNames,\n\tsaveButtonText,\n\tshowAddAnother,\n\tsingular,\n\ttitlePrefixText,\n\t...otherProps\n}) {\n\tconst [row, setRow] = useState(defaultRow);\n\tconst [addAnother, setAddAnother] = useState(false);\n\tconst history = useHistory();\n\tconst submitRef = useRef(null);\n\n\tconst afterSubmitSuccess = (response) => {\n\t\tif (!addAnother) {\n\t\t\thistory.push(`/${path}/${response.id}`);\n\t\t}\n\t};\n\n\tconst FormComponent = component;\n\tcomponentProps.formType = 'add';\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 's' && e.metaKey && submitRef && submitRef.current) {\n\t\t\te.preventDefault();\n\t\t\tsubmitRef.current.click();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', onKeyDown);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={`${titlePrefixText} ${singular}`} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1 data-cy=\"title\">{`${titlePrefixText} ${singular}`}</h1>\n\t\t\t\t<ul className=\"crudnick-list\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"formosa-button\"\n\t\t\t\t\t\t\tform=\"crudnick-add-form\"\n\t\t\t\t\t\t\tdata-cy=\"save\"\n\t\t\t\t\t\t\tref={submitRef}\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t{showAddAnother && (\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tid=\"crudnick-add-another\"\n\t\t\t\t\t\t\t\tlabel={addAnotherText}\n\t\t\t\t\t\t\t\tlabelPosition=\"after\"\n\t\t\t\t\t\t\t\tsetValue={setAddAnother}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvalue={addAnother}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</header>\n\n\t\t\t<MyForm\n\t\t\t\tafterSubmitSuccess={afterSubmitSuccess}\n\t\t\t\tclearOnSubmit\n\t\t\t\tdefaultRow={defaultRow}\n\t\t\t\terrorMessageText={errorMessageText}\n\t\t\t\tfilterBody={filterBody}\n\t\t\t\tfilterValues={filterValues}\n\t\t\t\thtmlId=\"crudnick-add-form\"\n\t\t\t\tmethod=\"POST\"\n\t\t\t\tpath={apiPath}\n\t\t\t\tpreventEmptyRequest\n\t\t\t\trelationshipNames={relationshipNames}\n\t\t\t\trow={row}\n\t\t\t\tsetRow={setRow}\n\t\t\t\tsuccessToastText={`${capitalize(singular)} added successfully.`}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t<FormComponent row={row} setRow={setRow} {...componentProps} />\n\t\t\t</MyForm>\n\n\t\t\t{extra ? extra(row) : null}\n\t\t</>\n\t);\n}\n\nAddForm.propTypes = {\n\taddAnotherText: PropTypes.string,\n\tapiPath: PropTypes.string.isRequired,\n\tcomponent: PropTypes.func.isRequired,\n\tcomponentProps: PropTypes.object,\n\tdefaultRow: PropTypes.object,\n\textra: PropTypes.func,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\tpath: PropTypes.string.isRequired,\n\trelationshipNames: PropTypes.array,\n\tsaveButtonText: PropTypes.string,\n\tshowAddAnother: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\ttitlePrefixText: PropTypes.string,\n};\n\nAddForm.defaultProps = {\n\taddAnotherText: 'Add another',\n\tcomponentProps: {},\n\tdefaultRow: {},\n\textra: null,\n\tfilterBody: null,\n\tfilterValues: null,\n\trelationshipNames: [],\n\tsaveButtonText: 'Save',\n\tshowAddAnother: true,\n\ttitlePrefixText: 'Add',\n};\n","import { Api, FormosaContext } from '@jlbelanger/formosa';\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Auth from '../Utilities/Auth';\nimport { errorMessageText } from '../Utilities/Errors';\nimport { ReactComponent as MenuIcon } from '../../svg/menu.svg';\nimport { NavLink } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { ReactComponent as XIcon } from '../../svg/x.svg';\n\nexport default function Nav({ nav }) {\n\tconst { addToast } = useContext(FormosaContext);\n\tconst dialogRef = useRef(null);\n\tconst breakpoint = 1025;\n\tconst [showInlineNav, setShowInlineNav] = useState(window.innerWidth >= breakpoint);\n\n\tconst onTransitionEnd = () => {\n\t\tdocument.body.classList.remove('show-nav');\n\t\tif (dialogRef.current.tagName === 'DIALOG') {\n\t\t\tdialogRef.current.close();\n\t\t}\n\t\tdialogRef.current.removeEventListener('transitionend', onTransitionEnd);\n\t};\n\n\tconst onResize = () => {\n\t\tsetShowInlineNav(window.innerWidth >= breakpoint);\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', onResize);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', onResize);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (showInlineNav) {\n\t\t\thideMenu(); // eslint-disable-line no-use-before-define\n\t\t\tonTransitionEnd();\n\t\t}\n\t}, [showInlineNav]);\n\n\tconst logout = () => {\n\t\tApi.delete('auth/logout')\n\t\t\t.catch((response) => {\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\taddToast(errorMessageText(response), 'error');\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tAuth.logout();\n\t\t\t});\n\t};\n\n\tconst hideMenu = () => {\n\t\tdocument.body.classList.remove('animate-nav');\n\t\tdialogRef.current.addEventListener('transitionend', onTransitionEnd);\n\t};\n\n\tconst openMenu = () => {\n\t\tdocument.body.classList.add('show-nav');\n\t\tdialogRef.current.showModal();\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.body.classList.add('animate-nav');\n\t\t}, 10);\n\t};\n\n\tconst onCancelDialog = (e) => {\n\t\te.preventDefault();\n\t\thideMenu();\n\t};\n\n\tconst onClickDialog = (e) => {\n\t\tif (e.target.tagName === 'DIALOG') {\n\t\t\thideMenu();\n\t\t}\n\t};\n\n\tconst Dialog = showInlineNav ? 'div' : 'dialog';\n\n\treturn (\n\t\t<nav id=\"crudnick-nav\">\n\t\t\t<Dialog id=\"crudnick-nav__dialog\" ref={dialogRef} onCancel={onCancelDialog} onClick={onClickDialog}>\n\t\t\t\t<button\n\t\t\t\t\taria-controls=\"crudnick-nav__dialog\"\n\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\tclassName=\"formosa-button crudnick-menu-button\"\n\t\t\t\t\tid=\"crudnick-menu-close-button\"\n\t\t\t\t\tonClick={hideMenu}\n\t\t\t\t\ttitle=\"Close Menu\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<XIcon aria-hidden=\"true\" />\n\t\t\t\t\tClose Menu\n\t\t\t\t</button>\n\t\t\t\t<ul id=\"crudnick-nav__list\">\n\t\t\t\t\t{nav.map(({ label, path }) => (\n\t\t\t\t\t\t<li className=\"crudnick-list__item\" key={path}>\n\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\tclassName=\"formosa-button crudnick-list__button\"\n\t\t\t\t\t\t\t\tonClick={hideMenu}\n\t\t\t\t\t\t\t\tto={path}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t\t<li className=\"crudnick-list__item\">\n\t\t\t\t\t\t<button className=\"formosa-button crudnick-list__button\" data-cy=\"logout\" id=\"crudnick-logout\" onClick={logout} type=\"button\">\n\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</Dialog>\n\t\t\t<button\n\t\t\t\taria-controls=\"crudnick-nav__dialog\"\n\t\t\t\taria-expanded=\"true\"\n\t\t\t\tclassName=\"formosa-button crudnick-menu-button\"\n\t\t\t\tdata-cy=\"menu\"\n\t\t\t\tid=\"crudnick-menu-show-button\"\n\t\t\t\tonClick={openMenu}\n\t\t\t\ttitle=\"Show Menu\"\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<MenuIcon aria-hidden=\"true\" />\n\t\t\t\tShow Menu\n\t\t\t</button>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tnav: PropTypes.array.isRequired,\n};\n","import { Alert, Field, Form, FormAlert, Submit } from '@jlbelanger/formosa';\nimport { Link, useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { errorMessageText } from '../../Utilities/Errors';\nimport MetaTitle from '../../Components/MetaTitle';\n\nexport default function ForgotPassword() {\n\tconst history = useHistory();\n\tconst [row, setRow] = useState({});\n\tconst [message, setMessage] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tif (urlSearchParams.get('expired')) {\n\t\t\tsetMessage({\n\t\t\t\ttext: 'Error: This link has expired.',\n\t\t\t\ttype: 'error',\n\t\t\t});\n\t\t\thistory.replace({ search: '' });\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<Form\n\t\t\tbeforeSubmit={() => { setMessage(false); return true; }}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\tclearOnSubmit\n\t\t\terrorMessageText={errorMessageText}\n\t\t\tmethod=\"POST\"\n\t\t\tpath=\"auth/forgot-password\"\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t\tsuccessMessageText=\"If there is an account with this email address, you will receive a password reset email shortly.\"\n\t\t>\n\t\t\t<MetaTitle title=\"Forgot your password?\" />\n\n\t\t\t<h1>Forgot your password?</h1>\n\n\t\t\t<FormAlert />\n\t\t\t{message && (<Alert type={message.type}>{message.text}</Alert>)}\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\tname=\"email\"\n\t\t\t\trequired\n\t\t\t\ttype=\"email\"\n\t\t\t/>\n\n\t\t\t<Submit\n\t\t\t\tlabel=\"Send link\"\n\t\t\t\tpostfix={(\n\t\t\t\t\t<Link className=\"formosa-button crudnick-button--link\" to=\"/\">Back to login</Link>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Form>\n\t);\n}\n","import { Alert, Api, Field, FormAlert, FormContext, Submit } from '@jlbelanger/formosa';\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { errorMessageText } from '../../Utilities/Errors';\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from '../../Components/MetaTitle';\nimport PropTypes from 'prop-types';\n\nexport default function LoginForm({ message, row, setMessage, setShowVerificationButton, showVerificationButton }) {\n\tconst { clearAlert } = useContext(FormContext);\n\n\tconst resendVerificationEmail = () => {\n\t\tclearAlert();\n\t\tsetMessage(null);\n\t\tsetShowVerificationButton(false);\n\t\tconst data = {\n\t\t\tusername: row.username || showVerificationButton,\n\t\t};\n\t\tApi.post('auth/resend-verification', JSON.stringify(data))\n\t\t\t.catch((response) => {\n\t\t\t\tsetMessage(errorMessageText(response));\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetMessage({\n\t\t\t\t\ttext: 'Check your email to continue the registration process.',\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title=\"Login\" />\n\n\t\t\t<h1>Login</h1>\n\n\t\t\t{message && (<Alert type={message.type}>{message.text}</Alert>)}\n\t\t\t{showVerificationButton && (\n\t\t\t\t<p className={`formosa-alert formosa-alert--${showVerificationButton === true ? 'error' : 'success'} post-alert-button`}>\n\t\t\t\t\t<button className=\"formosa-button button--secondary\" onClick={resendVerificationEmail} type=\"button\">\n\t\t\t\t\t\tResend verification email\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t)}\n\n\t\t\t<FormAlert />\n\n\t\t\t<Field\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tautoComplete=\"username\"\n\t\t\t\tlabel=\"Username\"\n\t\t\t\tname=\"username\"\n\t\t\t\trequired\n\t\t\t\ttype=\"text\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\tlabel=\"Password\"\n\t\t\t\tname=\"password\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tlabel=\"Remember me\"\n\t\t\t\tlabelPosition=\"after\"\n\t\t\t\tname=\"remember\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t/>\n\n\t\t\t<Submit\n\t\t\t\tlabel=\"Log in\"\n\t\t\t\tpostfix={(\n\t\t\t\t\t<Link className=\"formosa-button crudnick-button--link\" to=\"/forgot-password\">Forgot password?</Link>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nLoginForm.propTypes = {\n\tmessage: PropTypes.object,\n\trow: PropTypes.object.isRequired,\n\tsetMessage: PropTypes.func.isRequired,\n\tsetShowVerificationButton: PropTypes.func.isRequired,\n\tshowVerificationButton: PropTypes.bool,\n};\n\nLoginForm.defaultProps = {\n\tmessage: null,\n\tshowVerificationButton: false,\n};\n","import React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Auth from '../../Utilities/Auth';\nimport { errorMessageText } from '../../Utilities/Errors';\nimport { Form } from '@jlbelanger/formosa';\nimport LoginForm from './LoginForm';\nimport { useHistory } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function Login() {\n\tconst history = useHistory();\n\tconst [row, setRow] = useState({});\n\tconst [message, setMessage] = useState(null);\n\tconst [showVerificationButton, setShowVerificationButton] = useState(false);\n\n\tconst beforeSubmit = () => {\n\t\tsetMessage(null);\n\t\tsetShowVerificationButton(false);\n\t\treturn true;\n\t};\n\n\tconst afterSubmitFailure = (response) => {\n\t\tsetShowVerificationButton(response.errors[0].code === 'auth.unverified');\n\t};\n\n\tconst afterSubmitSuccess = (response) => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tlet redirect;\n\t\tif (urlSearchParams.get('redirect') && urlSearchParams.get('redirect')[0] === '/') {\n\t\t\tredirect = urlSearchParams.get('redirect');\n\t\t} else {\n\t\t\tredirect = process.env.PUBLIC_URL || '/';\n\t\t}\n\t\tAuth.login(response.user, response.token, response.user.remember);\n\t\twindow.location.href = redirect;\n\t};\n\n\tuseEffect(() => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tif (urlSearchParams.get('status') === '401') {\n\t\t\tsetMessage({\n\t\t\t\ttext: 'Your session has expired. Please log in again.',\n\t\t\t\ttype: 'warning',\n\t\t\t});\n\t\t\thistory.replace({ search: '' });\n\t\t} else if (urlSearchParams.get('verify')) {\n\t\t\tsetMessage({\n\t\t\t\ttext: `Check your email (${urlSearchParams.get('email')}) to continue the registration process.`,\n\t\t\t\ttype: 'success',\n\t\t\t});\n\t\t\tsetShowVerificationButton(urlSearchParams.get('username'));\n\t\t\thistory.replace({ search: '' });\n\t\t} else if (urlSearchParams.get('expired')) {\n\t\t\thistory.push('/forgot-password?expired=1');\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<Form\n\t\t\tafterSubmitFailure={afterSubmitFailure}\n\t\t\tafterSubmitSuccess={afterSubmitSuccess}\n\t\t\tbeforeSubmit={beforeSubmit}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\terrorMessageText={(response) => (errorMessageText(response, false))}\n\t\t\tmethod=\"POST\"\n\t\t\tpath=\"auth/login\"\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t>\n\t\t\t<LoginForm\n\t\t\t\tmessage={message}\n\t\t\t\trow={row}\n\t\t\t\tsetMessage={setMessage}\n\t\t\t\tshowVerificationButton={showVerificationButton}\n\t\t\t\tsetShowVerificationButton={setShowVerificationButton}\n\t\t\t/>\n\t\t</Form>\n\t);\n}\n","import { Field, Form, FormAlert, Submit } from '@jlbelanger/formosa';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { useHistory, useParams } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport { errorMessageText } from '../../Utilities/Errors';\nimport MetaTitle from '../../Components/MetaTitle';\n\nexport default function ResetPassword() {\n\tconst [row, setRow] = useState({});\n\tconst { token } = useParams();\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tconst urlSearchParams = new URLSearchParams(history.location.search);\n\t\tif (urlSearchParams.get('expires') < Math.floor(Date.now() / 1000)) {\n\t\t\thistory.push('/?expired=1');\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<Form\n\t\t\tafterSubmitSuccess={() => {\n\t\t\t\thistory.push('/');\n\t\t\t}}\n\t\t\tclassName=\"crudnick-auth-form\"\n\t\t\terrorMessageText={errorMessageText}\n\t\t\tmethod=\"PUT\"\n\t\t\tpath={`auth/reset-password/${token}${window.location.search}`}\n\t\t\trow={row}\n\t\t\tsetRow={setRow}\n\t\t\tshowMessage={false}\n\t\t\tsuccessToastText=\"Password reset successfully.\"\n\t\t>\n\t\t\t<MetaTitle title=\"Reset password\" />\n\n\t\t\t<h1>Reset password</h1>\n\n\t\t\t<FormAlert />\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\tname=\"email\"\n\t\t\t\trequired\n\t\t\t\ttype=\"email\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\tlabel=\"New password\"\n\t\t\t\tname=\"new_password\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\tlabel=\"Confirm new password\"\n\t\t\t\tname=\"new_password_confirmation\"\n\t\t\t\trequired\n\t\t\t\ttype=\"password\"\n\t\t\t/>\n\n\t\t\t<Submit label=\"Reset password\" />\n\t\t</Form>\n\t);\n}\n","import { Redirect, Route, Switch, useLocation } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport ForgotPassword from './Pages/Auth/ForgotPassword';\nimport Login from './Pages/Auth/Login';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport ResetPassword from './Pages/Auth/ResetPassword';\n\nexport default function Routes() {\n\tconst location = useLocation();\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route exact path=\"/\"><Login /></Route>\n\t\t\t<Route exact path=\"/forgot-password\"><ForgotPassword /></Route>\n\t\t\t<Route exact path=\"/reset-password/:token\"><ResetPassword /></Route>\n\t\t\t<Route><Redirect to={`/?redirect=${encodeURIComponent(`${process.env.PUBLIC_URL}${location.pathname}${location.search}`)}`} /></Route>\n\t\t</Switch>\n\t);\n}\n","import { Api, FormContainer } from '@jlbelanger/formosa';\nimport Auth from './Utilities/Auth';\nimport { BrowserRouter } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport Nav from './Components/Nav';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport Routes from './Routes';\n\nexport default function App({\n\tarticleProps,\n\tchildren,\n\tnav,\n\trouterAttributes,\n}) {\n\tif (Auth.isLoggedIn() && !Api.getToken()) {\n\t\tApi.setToken(Auth.token());\n\t}\n\n\tdocument.addEventListener('formosaApiRequest', () => {\n\t\tAuth.refresh();\n\t});\n\n\t// Accessibility: skip to content (https://www.bignerdranch.com/blog/web-accessibility-skip-navigation-links/).\n\tconst onClick = (e) => {\n\t\te.preventDefault();\n\t\tconst id = e.target.getAttribute('href').split('#')[1];\n\t\tconst elem = document.getElementById(id);\n\t\telem.setAttribute('tabindex', -1);\n\t\telem.addEventListener('blur', () => {\n\t\t\telem.removeAttribute('tabindex');\n\t\t});\n\t\telem.focus();\n\t};\n\n\treturn (\n\t\t<BrowserRouter {...routerAttributes}>\n\t\t\t<a href=\"#crudnick-article\" id=\"crudnick-skip\" onClick={onClick}>Skip to content</a>\n\t\t\t<FormContainer>\n\t\t\t\t{Auth.isLoggedIn() && <Nav nav={nav} />}\n\t\t\t\t<article id=\"crudnick-article\" {...articleProps}>\n\t\t\t\t\t{Auth.isLoggedIn() ? children : (<Routes />)}\n\t\t\t\t</article>\n\t\t\t</FormContainer>\n\t\t</BrowserRouter>\n\t);\n}\n\nApp.propTypes = {\n\tarticleProps: PropTypes.object,\n\tchildren: PropTypes.node.isRequired,\n\tnav: PropTypes.array.isRequired,\n\trouterAttributes: PropTypes.object,\n};\n\nApp.defaultProps = {\n\tarticleProps: null,\n\trouterAttributes: null,\n};\n","import { Alert } from '@jlbelanger/formosa';\nimport Auth from '../Utilities/Auth';\nimport MetaTitle from './MetaTitle';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Error({ error }) {\n\tif (error.status === 401) {\n\t\tAuth.logout(error.status);\n\t\treturn null;\n\t}\n\n\tlet message = 'Error loading data. Please try again later.';\n\tif (error.errors[0].title) {\n\t\tmessage = `Error: ${error.errors[0].title}`;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title=\"Error\" />\n\t\t\t<Alert type=\"error\">{message}</Alert>\n\t\t</>\n\t);\n}\n\nError.propTypes = {\n\terror: PropTypes.object.isRequired,\n};\n","import { Alert, Api } from '@jlbelanger/formosa';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Actions from './Actions';\nimport { capitalize } from '../Utilities/String';\nimport Error from './Error';\nimport { errorMessageText } from '../Utilities/Errors';\nimport get from 'get-value';\nimport MetaTitle from './MetaTitle';\nimport MyForm from './MyForm';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\n\nexport default function EditForm({\n\tactions,\n\tapiPath,\n\tcomponent,\n\tcomponentProps,\n\textra,\n\tfilterBody,\n\tfilterValues,\n\tname,\n\tpath,\n\trelationshipNames,\n\tsaveButtonText,\n\tshowDelete,\n\tshowSave,\n\tsingular,\n\tsubpages,\n\ttitlePrefixText,\n\ttransform,\n\turl,\n\t...otherProps\n}) {\n\tconst { id } = useParams();\n\tconst [row, setRow] = useState(null);\n\tconst [error, setError] = useState(false);\n\tconst [actionError, setActionError] = useState(false);\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tapi(url)\n\t\t\t.catch((response) => {\n\t\t\t\tsetError(response);\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (transform) {\n\t\t\t\t\tsetRow(transform(response));\n\t\t\t\t} else {\n\t\t\t\t\tsetRow(response);\n\t\t\t\t}\n\t\t\t});\n\t}, [url]);\n\n\tif (error) {\n\t\treturn (\n\t\t\t<Error error={error} />\n\t\t);\n\t}\n\n\tconst afterSubmitFailure = (e) => {\n\t\tsetActionError(errorMessageText(e));\n\t};\n\n\tconst FormComponent = component;\n\tcomponentProps.formType = 'edit';\n\tconst metaTitle = row ? `${titlePrefixText} ${typeof name === 'function' ? name(row) : get(row, name)}` : '';\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={metaTitle} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1 data-cy=\"title\">{`${titlePrefixText} ${singular}`}</h1>\n\t\t\t\t{row && (\n\t\t\t\t\t<Actions\n\t\t\t\t\t\tapiPath={apiPath}\n\t\t\t\t\t\tcurrentPage=\"/\"\n\t\t\t\t\t\tpath={path}\n\t\t\t\t\t\tsaveButtonText={saveButtonText}\n\t\t\t\t\t\trow={row}\n\t\t\t\t\t\tsetActionError={setActionError}\n\t\t\t\t\t\tshowDelete={showDelete}\n\t\t\t\t\t\tshowSave={showSave}\n\t\t\t\t\t\tsingular={singular}\n\t\t\t\t\t\tsubpages={subpages}\n\t\t\t\t\t>\n\t\t\t\t\t\t{actions ? actions(row, setRow) : null}\n\t\t\t\t\t</Actions>\n\t\t\t\t)}\n\t\t\t</header>\n\n\t\t\t{actionError && (<Alert type=\"error\">{actionError}</Alert>)}\n\n\t\t\t{row && (\n\t\t\t\t<MyForm\n\t\t\t\t\tafterSubmitFailure={afterSubmitFailure}\n\t\t\t\t\tbeforeSubmit={() => { setActionError(false); return true; }}\n\t\t\t\t\tfilterBody={filterBody}\n\t\t\t\t\tfilterValues={filterValues}\n\t\t\t\t\thtmlId=\"crudnick-edit-form\"\n\t\t\t\t\tid={id}\n\t\t\t\t\tmethod=\"PUT\"\n\t\t\t\t\tpath={apiPath}\n\t\t\t\t\tpreventEmptyRequest\n\t\t\t\t\trelationshipNames={relationshipNames}\n\t\t\t\t\trow={row}\n\t\t\t\t\tsetRow={setRow}\n\t\t\t\t\tsuccessToastText={`${capitalize(singular)} saved successfully.`}\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t<FormComponent row={row} setRow={setRow} {...componentProps} />\n\t\t\t\t</MyForm>\n\t\t\t)}\n\n\t\t\t{row && extra ? extra(row) : null}\n\t\t</>\n\t);\n}\n\nEditForm.propTypes = {\n\tactions: PropTypes.func,\n\tapiPath: PropTypes.string.isRequired,\n\tcomponent: PropTypes.func.isRequired,\n\tcomponentProps: PropTypes.object,\n\textra: PropTypes.func,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\tname: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tpath: PropTypes.string.isRequired,\n\trelationshipNames: PropTypes.array,\n\tsaveButtonText: PropTypes.string,\n\tshowDelete: PropTypes.bool,\n\tshowSave: PropTypes.bool,\n\tsingular: PropTypes.string.isRequired,\n\tsubpages: PropTypes.array,\n\ttitlePrefixText: PropTypes.string,\n\ttransform: PropTypes.func,\n\turl: PropTypes.string.isRequired,\n};\n\nEditForm.defaultProps = {\n\tactions: null,\n\tcomponentProps: {},\n\textra: null,\n\tfilterBody: null,\n\tfilterValues: null,\n\tname: null,\n\trelationshipNames: [],\n\tsaveButtonText: 'Save',\n\tshowDelete: true,\n\tshowSave: true,\n\tsubpages: [],\n\ttitlePrefixText: 'Edit',\n\ttransform: null,\n};\n","import get from 'get-value';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nconst escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst filterByKey = (records, key, value) => {\n\tvalue = value.trim().toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = (get(record, key) || '').toString().replace(/<[^>]+?>/g, '').toLowerCase();\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = (get(a, key) || '').toString().toLowerCase();\n\t\tconst bValue = (get(b, key) || '').toString().toLowerCase();\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n\nexport const filterByKeys = (records, filters) => { // eslint-disable-line import/prefer-default-export\n\tObject.keys(filters).forEach((key) => {\n\t\trecords = filterByKey(records, key, filters[key]);\n\t});\n\treturn records;\n};\n","import get from 'get-value';\n\nexport const sortByKey = (records, key, dir) => ( // eslint-disable-line import/prefer-default-export\n\trecords.sort((a, b) => {\n\t\tlet aVal = get(a, key);\n\t\tif (aVal === undefined || aVal === null) {\n\t\t\taVal = '';\n\t\t}\n\t\tlet bVal = get(b, key);\n\t\tif (bVal === undefined || bVal === null) {\n\t\t\tbVal = '';\n\t\t}\n\t\tif (aVal === bVal) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (aVal === '') {\n\t\t\treturn 1;\n\t\t}\n\t\tif (bVal === '') {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (typeof aVal === 'number' && typeof bVal === 'number') {\n\t\t\tif (dir === 'asc') {\n\t\t\t\treturn aVal < bVal ? -1 : 1;\n\t\t\t}\n\t\t\treturn aVal > bVal ? -1 : 1;\n\t\t}\n\n\t\taVal = aVal.toString();\n\t\tbVal = bVal.toString();\n\t\treturn dir === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n\t})\n);\n","import { Alert, Api, Input } from '@jlbelanger/formosa';\nimport React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as ArrowIcon } from '../../svg/arrow.svg';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport { cleanKey } from '../Utilities/String';\nimport { errorMessageText } from '../Utilities/Errors';\nimport { filterByKeys } from '../Utilities/Filter';\nimport get from 'get-value';\nimport { Link } from 'react-router-dom'; // eslint-disable-line import/no-unresolved\nimport MetaTitle from './MetaTitle';\nimport PropTypes from 'prop-types';\nimport { sortByKey } from '../Utilities/Sort';\n\nexport default function IndexTable({ columns, defaultOptions, path, title, url }) {\n\tconst [rows, setRows] = useState(null);\n\tconst [filteredRows, setFilteredRows] = useState([]);\n\tconst [rowsError, setRowsError] = useState(false);\n\tconst [sortKey, setSortKey] = useState('name');\n\tconst [sortDir, setSortDir] = useState('asc');\n\tconst [filters, setFilters] = useState(() => {\n\t\tconst output = {};\n\t\tcolumns.forEach((column) => {\n\t\t\toutput[cleanKey(column.key)] = '';\n\t\t});\n\t\treturn output;\n\t});\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'sortKey')) {\n\t\t\tsetSortKey(defaultOptions.sortKey);\n\t\t}\n\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'sortDir')) {\n\t\t\tsetSortDir(defaultOptions.sortDir);\n\t\t}\n\n\t\tif (Object.prototype.hasOwnProperty.call(defaultOptions, 'filters')) {\n\t\t\tsetFilters(defaultOptions.filters);\n\t\t}\n\n\t\tapi(url, false)\n\t\t\t.catch((response) => {\n\t\t\t\tsetRowsError(errorMessageText(response));\n\t\t\t\tsetRows(null);\n\t\t\t\tsetFilteredRows([]);\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetRows(response);\n\t\t\t\tsetFilteredRows(response);\n\t\t\t});\n\t}, [url]);\n\n\tconst sort = (e) => {\n\t\tconst newSortKey = e.target.getAttribute('data-key');\n\t\tlet newSortDir;\n\t\tif (sortKey === newSortKey) {\n\t\t\tnewSortDir = sortDir === 'asc' ? 'desc' : 'asc';\n\t\t} else {\n\t\t\tnewSortDir = 'asc';\n\t\t}\n\n\t\tsetSortKey(newSortKey);\n\t\tsetSortDir(newSortDir);\n\n\t\tsetRows(sortByKey(rows, newSortKey, newSortDir));\n\t\tsetFilteredRows(sortByKey(filteredRows, newSortKey, newSortDir));\n\t};\n\n\tconst numRows = rows ? rows.length : 0;\n\tlet numResults = ` (${filteredRows.length.toLocaleString()}`;\n\tif (filteredRows.length !== numRows) {\n\t\tnumResults += ` of ${numRows.toLocaleString()}`;\n\t}\n\tnumResults += ` result${numRows === 1 ? '' : 's'})`;\n\n\tcolumns = columns.map((column) => {\n\t\tif (column.link) {\n\t\t\tcolumn.fn = (row, value) => (\n\t\t\t\t<Link className=\"crudnick-link--table\" to={`/${path}/${row.id}`}>\n\t\t\t\t\t{value}\n\t\t\t\t</Link>\n\t\t\t);\n\t\t} else if (column.type === 'checkbox') {\n\t\t\tcolumn.fn = (_row, value) => (value ? (<CheckIcon aria-hidden=\"true\" height={16} width={16} />) : null);\n\t\t\tcolumn.size = 4;\n\t\t}\n\t\treturn column;\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<MetaTitle title={title} />\n\n\t\t\t<header className=\"crudnick-header\">\n\t\t\t\t<h1>\n\t\t\t\t\t<span data-cy=\"title\">{title}</span>\n\t\t\t\t\t<small data-cy=\"num-results\">{rows ? numResults : null}</small>\n\t\t\t\t</h1>\n\t\t\t\t<ul className=\"crudnick-list\">\n\t\t\t\t\t<li className=\"crudnick-list__item\">\n\t\t\t\t\t\t<Link data-cy=\"add\" className=\"formosa-button crudnick-list__button\" to={`/${path}/add`}>Add new</Link>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</header>\n\n\t\t\t{rowsError ? (\n\t\t\t\t<Alert type=\"error\">{rowsError}</Alert>\n\t\t\t) : (\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{columns.map((column) => (\n\t\t\t\t\t\t\t\t<th className={column.size ? 'crudnick-column--shrink' : null} key={column.key} scope=\"col\" {...column.thAttributes}>\n\t\t\t\t\t\t\t\t\t{column.disableSort ? (column.shortLabel || column.label) : (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={`Sort by ${column.label}`}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"formosa-button\"\n\t\t\t\t\t\t\t\t\t\t\tdata-key={column.sortKey || cleanKey(column.key)}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={rows === null}\n\t\t\t\t\t\t\t\t\t\t\tonClick={sort}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{column.shortLabel || column.label}\n\t\t\t\t\t\t\t\t\t\t\t{sortKey === (column.sortKey || cleanKey(column.key)) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<ArrowIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`crudnick-icon--caret ${sortDir === 'desc' ? 'flip' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\theight={12}\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth={12}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{columns.map(({ key, disableSearch, label, size }) => (\n\t\t\t\t\t\t\t\t<td className=\"formosa-input-wrapper--search\" key={key}>\n\t\t\t\t\t\t\t\t\t{!disableSearch && (\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\taria-label={`Search ${label}`}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"formosa-field__input\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={rows === null}\n\t\t\t\t\t\t\t\t\t\t\tsetValue={(newValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst newFilters = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...filters,\n\t\t\t\t\t\t\t\t\t\t\t\t\t[cleanKey(key)]: newValue,\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilters(newFilters);\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst newRows = filterByKeys(rows, newFilters);\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilteredRows(newRows);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={filters[cleanKey(key)]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{rows === null\n\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colSpan={columns.length}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"formosa-spinner\" role=\"status\">\n\t\t\t\t\t\t\t\t\t\t\tLoading...\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t) : filteredRows.map((row) => (\n\t\t\t\t\t\t\t\t<tr key={row.id}>\n\t\t\t\t\t\t\t\t\t{columns.map(({ fn, key }) => (\n\t\t\t\t\t\t\t\t\t\t<td className={`crudnick-cell--${key}`} key={key}>\n\t\t\t\t\t\t\t\t\t\t\t{fn ? fn(row, get(row, cleanKey(key)), key) : get(row, cleanKey(key))}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nIndexTable.propTypes = {\n\tcolumns: PropTypes.array.isRequired,\n\tdefaultOptions: PropTypes.object.isRequired,\n\tpath: PropTypes.string.isRequired,\n\ttitle: PropTypes.string.isRequired,\n\turl: PropTypes.string.isRequired,\n};\n","import './style.scss';\nimport actions from './js/Components/Actions';\nimport addForm from './js/Components/AddForm';\nimport app from './js/App';\nimport auth from './js/Utilities/Auth';\nimport editForm from './js/Components/EditForm';\nimport error from './js/Components/Error';\nimport { errorMessageText as ErrorMessageText } from './js/Utilities/Errors';\nimport forgotPassword from './js/Pages/Auth/ForgotPassword';\nimport indexTable from './js/Components/IndexTable';\nimport login from './js/Pages/Auth/Login';\nimport metaTitle from './js/Components/MetaTitle';\nimport modal from './js/Components/Modal';\nimport myForm from './js/Components/MyForm';\nimport nav from './js/Components/Nav';\nimport resetPassword from './js/Pages/Auth/ResetPassword';\n\nexport const Actions = actions;\nexport const AddForm = addForm;\nexport const App = app;\nexport const Auth = auth;\nexport const EditForm = editForm;\nexport const Error = error;\nexport const errorMessageText = ErrorMessageText;\nexport const ForgotPassword = forgotPassword;\nexport const IndexTable = indexTable;\nexport const Login = login;\nexport const MetaTitle = metaTitle;\nexport const MyForm = myForm;\nexport const Modal = modal;\nexport const Nav = nav;\nexport const ResetPassword = resetPassword;\n"],"names":["capitalize","s","replace","a","toUpperCase","cleanKey","key","Auth","login","user","token","remember","Cookies","set","process","env","REACT_APP_COOKIE_PREFIX","JSON","stringify","attributes","refresh","parse","sameSite","expires","window","location","protocol","secure","logout","status","remove","href","PUBLIC_URL","id","get","isLoggedIn","errorMessageText","response","errors","map","e","title","join","Modal","cancelable","cancelButtonAttributes","cancelButtonClass","cancelButtonText","children","event","okButtonAttributes","okButtonClass","okButtonText","onClickCancel","onClickOk","text","dialogRef","useRef","onKeydown","onClickDialog","target","tagName","useEffect","document","body","classList","add","addEventListener","removeEventListener","focus","current","getAttribute","showModal","React","trim","propTypes","PropTypes","bool","object","string","node","isRequired","func","defaultProps","Actions","apiPath","currentPage","path","row","saveButtonText","setActionError","showDelete","showSave","singular","subpages","history","useHistory","useContext","FormosaContext","addToast","disableWarningPrompt","enableWarningPrompt","useState","setShowModal","submitRef","onKeyDown","metaKey","preventDefault","click","onDelete","Api","then","push","NavLink","REACT_APP_FRONTEND_URL","url","page","toLowerCase","array","MetaTitle","metaTitle","REACT_APP_TITLE","querySelector","innerText","MyFormPrompt","FormContext","getDirtyKeys","Prompt","length","MyForm","otherProps","showWarningPrompt","Form","AddForm","addAnotherText","component","componentProps","defaultRow","extra","filterBody","filterValues","relationshipNames","showAddAnother","titlePrefixText","setRow","addAnother","setAddAnother","afterSubmitSuccess","FormComponent","formType","Field","Nav","nav","breakpoint","innerWidth","showInlineNav","setShowInlineNav","onTransitionEnd","close","onResize","hideMenu","openMenu","setTimeout","onCancelDialog","Dialog","XIcon","label","MenuIcon","ForgotPassword","message","setMessage","urlSearchParams","URLSearchParams","search","type","FormAlert","Alert","Submit","Link","LoginForm","setShowVerificationButton","showVerificationButton","clearAlert","resendVerificationEmail","data","username","post","Login","beforeSubmit","afterSubmitFailure","code","redirect","ResetPassword","useParams","Math","floor","Date","now","Routes","useLocation","Switch","Route","Redirect","encodeURIComponent","pathname","App","articleProps","routerAttributes","getToken","setToken","onClick","split","elem","getElementById","setAttribute","removeAttribute","BrowserRouter","FormContainer","Error","error","EditForm","actions","name","transform","setError","actionError","api","instance","oneOfType","escapeRegExp","filterByKey","records","value","escapedValue","filter","record","recordValue","toString","match","RegExp","sort","b","aValue","bValue","aPos","indexOf","bPos","filterByKeys","filters","Object","keys","forEach","sortByKey","dir","aVal","undefined","bVal","localeCompare","IndexTable","columns","defaultOptions","rows","setRows","filteredRows","setFilteredRows","rowsError","setRowsError","sortKey","setSortKey","sortDir","setSortDir","output","column","setFilters","prototype","hasOwnProperty","call","newSortKey","newSortDir","numRows","numResults","toLocaleString","link","fn","_row","CheckIcon","size","thAttributes","disableSort","shortLabel","ArrowIcon","disableSearch","Input","newValue","newFilters","newRows","addForm","app","auth","editForm","ErrorMessageText","forgotPassword","indexTable","myForm","modal","resetPassword"],"mappings":"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"}